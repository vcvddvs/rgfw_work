{"ast":null,"code":"import axios from 'axios';\nconst TOKEN_KEY = 'token';\nexport function getToken() {\n  const token = localStorage.getItem(TOKEN_KEY);\n  if (!token) {\n    console.warn('Token不存在');\n    return null;\n  }\n  return token;\n}\nexport function setToken(token) {\n  if (!token) {\n    console.warn('尝试设置空token');\n    return;\n  }\n  localStorage.setItem(TOKEN_KEY, token);\n  // 设置axios默认请求头\n  axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n  console.log('Token已设置:', token);\n}\nexport function removeToken() {\n  localStorage.removeItem(TOKEN_KEY);\n  localStorage.removeItem('userId');\n  // 清除axios默认请求头\n  delete axios.defaults.headers.common['Authorization'];\n  console.log('Token已清除');\n}\nexport function hasValidToken() {\n  const token = getToken();\n  return !!token;\n}","map":{"version":3,"names":["axios","TOKEN_KEY","getToken","token","localStorage","getItem","console","warn","setToken","setItem","defaults","headers","common","log","removeToken","removeItem","hasValidToken"],"sources":["D:/back_elm/vue_elm/src/utils/auth.js"],"sourcesContent":["import axios from 'axios';\n\nconst TOKEN_KEY = 'token';\n\nexport function getToken() {\n  const token = localStorage.getItem(TOKEN_KEY);\n  if (!token) {\n    console.warn('Token不存在');\n    return null;\n  }\n  return token;\n}\n\nexport function setToken(token) {\n  if (!token) {\n    console.warn('尝试设置空token');\n    return;\n  }\n  \n  localStorage.setItem(TOKEN_KEY, token);\n  // 设置axios默认请求头\n  axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n  console.log('Token已设置:', token);\n}\n\nexport function removeToken() {\n  localStorage.removeItem(TOKEN_KEY);\n  localStorage.removeItem('userId');\n  // 清除axios默认请求头\n  delete axios.defaults.headers.common['Authorization'];\n  console.log('Token已清除');\n}\n\nexport function hasValidToken() {\n  const token = getToken();\n  return !!token;\n} "],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,SAAS,GAAG,OAAO;AAEzB,OAAO,SAASC,QAAQA,CAAA,EAAG;EACzB,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAACJ,SAAS,CAAC;EAC7C,IAAI,CAACE,KAAK,EAAE;IACVG,OAAO,CAACC,IAAI,CAAC,UAAU,CAAC;IACxB,OAAO,IAAI;EACb;EACA,OAAOJ,KAAK;AACd;AAEA,OAAO,SAASK,QAAQA,CAACL,KAAK,EAAE;EAC9B,IAAI,CAACA,KAAK,EAAE;IACVG,OAAO,CAACC,IAAI,CAAC,YAAY,CAAC;IAC1B;EACF;EAEAH,YAAY,CAACK,OAAO,CAACR,SAAS,EAAEE,KAAK,CAAC;EACtC;EACAH,KAAK,CAACU,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAG,UAAUT,KAAK,EAAE;EAClEG,OAAO,CAACO,GAAG,CAAC,WAAW,EAAEV,KAAK,CAAC;AACjC;AAEA,OAAO,SAASW,WAAWA,CAAA,EAAG;EAC5BV,YAAY,CAACW,UAAU,CAACd,SAAS,CAAC;EAClCG,YAAY,CAACW,UAAU,CAAC,QAAQ,CAAC;EACjC;EACA,OAAOf,KAAK,CAACU,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;EACrDN,OAAO,CAACO,GAAG,CAAC,UAAU,CAAC;AACzB;AAEA,OAAO,SAASG,aAAaA,CAAA,EAAG;EAC9B,MAAMb,KAAK,GAAGD,QAAQ,CAAC,CAAC;EACxB,OAAO,CAAC,CAACC,KAAK;AAChB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}