{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted, computed } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { orderApi } from '../utils/api';\nimport { businessApi } from '../utils/api'; // Added import for businessApi\nimport { ElMessage } from 'element-plus'; // Added ElMessage import\n\nconst baseURL = 'http://localhost:8090'; // API网关地址\n\nexport default {\n  __name: 'historyComponent',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const orders = ref([]);\n    const activeTab = ref('all');\n    onMounted(() => {\n      fetchOrders();\n    });\n    const goBack = () => {\n      router.push('/Index-Component');\n    };\n    const setActiveTab = tab => {\n      activeTab.value = tab;\n      // 切换标签时滚动到顶部\n      window.scrollTo(0, 0);\n    };\n\n    // 将逗号分隔的字符串转换为数组\n    const getArrayFromString = str => {\n      if (!str) return [];\n      try {\n        // 检查是否是Base64字符串集合\n        if (typeof str === 'string' && str.includes('data:image')) {\n          // 尝试找到所有的Base64图片\n          const matches = str.match(/data:image\\/[^;]+;base64,[A-Za-z0-9+/=]+/g);\n          if (matches && matches.length > 0) {\n            console.log(`找到 ${matches.length} 个完整的Base64图片`);\n            return matches;\n          }\n        }\n\n        // 检查是否包含多个iVBOR开头的Base64图片\n        if (typeof str === 'string' && str.includes('iVBOR')) {\n          // 尝试分割多个Base64字符串\n          const parts = [];\n          let currentIndex = 0;\n          while (currentIndex < str.length) {\n            const iVBORIndex = str.indexOf('iVBOR', currentIndex);\n            if (iVBORIndex === -1) break;\n\n            // 找到下一个iVBOR或字符串结束\n            let nextIndex = str.indexOf('iVBOR', iVBORIndex + 5);\n            if (nextIndex === -1) nextIndex = str.length;\n\n            // 提取这段Base64数据\n            const base64Part = str.substring(iVBORIndex, nextIndex).trim();\n            if (base64Part.length > 100) {\n              // 确保是有效的Base64数据\n              parts.push(base64Part);\n            }\n            currentIndex = nextIndex;\n          }\n          if (parts.length > 0) {\n            console.log(`找到 ${parts.length} 个iVBOR开头的Base64图片`);\n            return parts;\n          }\n        }\n\n        // 如果不是特殊的Base64集合，则按照常规方式处理\n        // 首先检查是否是单个Base64字符串\n        if (typeof str === 'string' && str.length > 100 && (str.startsWith('data:image') || str.startsWith('iVBOR') || /^[A-Za-z0-9+/=]+$/.test(str.substring(0, 20)))) {\n          return [str];\n        }\n\n        // 尝试按逗号分割，但需要注意不要分割Base64字符串中的逗号\n        const items = [];\n        const commaPositions = [];\n\n        // 找出所有可能的逗号位置\n        for (let i = 0; i < str.length; i++) {\n          if (str[i] === ',') {\n            commaPositions.push(i);\n          }\n        }\n\n        // 检查每个逗号是否在Base64字符串内部\n        let startPos = 0;\n        for (const pos of commaPositions) {\n          // 检查逗号前后的字符，判断是否是Base64内部的逗号\n          const beforeComma = str.substring(Math.max(0, pos - 20), pos);\n          const afterComma = str.substring(pos + 1, Math.min(str.length, pos + 21));\n\n          // 如果逗号前后都是Base64字符，则可能是Base64内部的逗号\n          const isBase64Comma = /^[A-Za-z0-9+/=]+$/.test(beforeComma) && /^[A-Za-z0-9+/=]+$/.test(afterComma);\n          if (!isBase64Comma) {\n            // 这是一个有效的分隔逗号\n            const item = str.substring(startPos, pos).trim();\n            if (item) items.push(item);\n            startPos = pos + 1;\n          }\n        }\n\n        // 添加最后一项\n        const lastItem = str.substring(startPos).trim();\n        if (lastItem) items.push(lastItem);\n\n        // 如果没有成功分割，回退到简单的逗号分割\n        if (items.length === 0) {\n          return str.split(',').map(item => item.trim());\n        }\n        return items;\n      } catch (error) {\n        console.error('分割字符串出错:', error);\n        // 出错时尝试简单的逗号分割\n        try {\n          return str.split(',').map(item => item.trim());\n        } catch {\n          return [str]; // 最后的回退方案\n        }\n      }\n    };\n\n    // 处理图片URL\n    const getImageUrl = imgPath => {\n      if (!imgPath) {\n        return require('@/assets/img/BUSINESS/img.png');\n      }\n      try {\n        // 如果是Base64编码的图片数据\n        if (typeof imgPath === 'string' && imgPath.length > 100) {\n          return sanitizeBase64(imgPath);\n        }\n\n        // 如果是完整URL，直接返回\n        if (imgPath.startsWith('http')) {\n          return imgPath;\n        }\n\n        // 如果是以/assets开头的路径，转换为正确的路径\n        if (imgPath.startsWith('/assets/')) {\n          // 去掉开头的/assets/，因为在项目中assets是相对路径\n          const relativePath = imgPath.replace('/assets/', '');\n          try {\n            return require(`@/assets/${relativePath}`);\n          } catch (e) {\n            // 尝试通过API网关获取\n            return baseURL + imgPath;\n          }\n        }\n\n        // 如果是相对路径，添加baseURL\n        if (imgPath.startsWith('/')) {\n          return baseURL + imgPath;\n        }\n\n        // 尝试加载项目中的图片\n        try {\n          // 首先尝试从BUSINESS目录加载\n          if (!imgPath.includes('/')) {\n            try {\n              return require('@/assets/img/BUSINESS/' + imgPath);\n            } catch (e) {\n              // 尝试从其他目录加载\n            }\n          }\n\n          // 然后尝试从普通img目录加载\n          return require('@/assets/img/' + imgPath);\n        } catch (e) {\n          return require('@/assets/img/BUSINESS/img.png');\n        }\n      } catch (error) {\n        console.error('处理图片URL出错:', error);\n        return require('@/assets/img/BUSINESS/img.png');\n      }\n    };\n\n    // 处理和验证Base64编码的图片\n    const sanitizeBase64 = base64String => {\n      try {\n        // 已经是完整的Base64字符串\n        if (base64String.startsWith('data:image/')) {\n          return base64String;\n        }\n\n        // 检查是否是PNG的Base64编码\n        if (base64String.startsWith('iVBOR')) {\n          return `data:image/png;base64,${base64String}`;\n        }\n\n        // 检查是否是JPEG的Base64编码\n        if (base64String.startsWith('/9j/')) {\n          return `data:image/jpeg;base64,${base64String}`;\n        }\n\n        // 检查是否包含无效字符\n        if (!/^[A-Za-z0-9+/=]+$/.test(base64String.replace(/\\s/g, ''))) {\n          console.warn('Base64字符串包含无效字符');\n          return '';\n        }\n\n        // 检查长度是否合理（Base64编码的图片通常很长）\n        if (base64String.length < 100) {\n          console.warn('Base64字符串长度不足');\n          return '';\n        }\n\n        // 默认作为PNG处理\n        return `data:image/png;base64,${base64String.replace(/\\s/g, '')}`;\n      } catch (error) {\n        console.error('处理Base64字符串出错:', error);\n        return '';\n      }\n    };\n\n    // 处理图片加载错误\n    const handleImageError = (e, type) => {\n      console.error(`图片加载失败: ${e.target.src.substring(0, 50)}...`);\n      try {\n        // 检查是否是Base64编码的图片加载失败\n        const src = e.target.src;\n        if (src && src.startsWith('data:image')) {\n          console.log('尝试修复Base64图片...');\n\n          // 提取Base64部分\n          const base64Data = src.split(',')[1];\n          if (base64Data) {\n            // 尝试使用不同的MIME类型\n            if (src.includes('image/png')) {\n              e.target.src = `data:image/jpeg;base64,${base64Data}`;\n              return;\n            } else if (src.includes('image/jpeg')) {\n              e.target.src = `data:image/png;base64,${base64Data}`;\n              return;\n            }\n          }\n        }\n      } catch (error) {\n        console.error('处理图片错误时出错:', error);\n      }\n\n      // 使用默认图片\n      if (type === 'business') {\n        e.target.src = require('@/assets/img/BUSINESS/img.png');\n      } else {\n        e.target.src = require('@/assets/img/sp01.png');\n      }\n    };\n\n    // 再次下单\n    const reorder = order => {\n      // 实现再次下单功能\n      router.push(`/business-component/${order.businessId}`);\n    };\n\n    // 前往评价页面\n    const goToRating = order => {\n      console.log('Order object:', order);\n\n      // 确保businessId存在且为有效值\n      const businessId = order.businessId || order.business?.businessId || '1';\n\n      // 如果商家图片为空，尝试再次获取\n      if (!order.businessImg && businessId) {\n        businessApi.getBusinessById(businessId).then(businessInfo => {\n          if (businessInfo && businessInfo.businessImg) {\n            navigateToRating(order, businessInfo.businessImg);\n          } else {\n            navigateToRating(order);\n          }\n        }).catch(error => {\n          console.error('获取商家信息失败:', error);\n          navigateToRating(order);\n        });\n      } else {\n        navigateToRating(order);\n      }\n    };\n\n    // 导航到评价页面\n    const navigateToRating = (order, businessImg = null) => {\n      router.push({\n        name: 'Rating',\n        params: {\n          orderId: order.orderId || '1',\n          businessId: order.businessId || order.business?.businessId || '1',\n          businessName: order.businessName || '未知商家'\n        },\n        query: {\n          businessImg: businessImg || order.businessImg || '',\n          orderDate: order.orderDate || ''\n        }\n      });\n    };\n\n    // 检查订单是否已评价\n    const isOrderRated = orderId => {\n      try {\n        // 检查本地存储中是否有该订单的评价\n        const ratingsString = localStorage.getItem('localRatings');\n        console.log(`检查订单 ${orderId} 是否已评价, 本地存储:`, ratingsString);\n        if (ratingsString) {\n          const ratings = JSON.parse(ratingsString);\n          console.log('解析后的本地评价:', ratings);\n\n          // 确保使用数字类型进行比较\n          const isRated = ratings.some(r => r.orderId === Number(orderId));\n          console.log(`订单 ${orderId} 已评价状态:`, isRated);\n          return isRated;\n        }\n      } catch (error) {\n        console.error('检查订单评价状态失败:', error);\n      }\n      return false;\n    };\n    const fetchOrders = async () => {\n      try {\n        const response = await orderApi.getOrderHistory();\n        console.log('订单历史原始响应:', response);\n        if (response && Array.isArray(response)) {\n          orders.value = response;\n        } else if (response && response.data && Array.isArray(response.data)) {\n          orders.value = response.data;\n        } else if (response && typeof response === 'object') {\n          // 尝试从响应中提取数据\n          console.log('尝试从响应中提取订单数据:', response);\n          const possibleOrderArrays = [response.data, response.result, response.content, response.records, response.list, response.orders];\n          for (const arr of possibleOrderArrays) {\n            if (arr && Array.isArray(arr)) {\n              console.log('找到订单数组:', arr);\n              orders.value = arr;\n              break;\n            }\n          }\n        }\n\n        // 详细记录每个订单的图片信息\n        console.log('订单数据处理前:', JSON.stringify(orders.value.map(order => ({\n          orderId: order.orderId,\n          businessImg: order.businessImg ? order.businessImg.substring(0, 30) + '...' : 'null',\n          businessImgType: order.businessImg ? typeof order.businessImg : 'null',\n          hasBusinessImg: !!order.businessImg,\n          foodImgs: order.foodImgs ? order.foodImgs.substring(0, 30) + '...' : 'null',\n          // 添加更多详细的食品图片信息\n          foodImgsArray: getArrayFromString(order.foodImgs),\n          foodImgsFirstItem: getArrayFromString(order.foodImgs)[0] ? getArrayFromString(order.foodImgs)[0].substring(0, 30) + '...' : 'null'\n        }))));\n\n        // 确保每个订单对象都有必要的属性\n        orders.value = orders.value.map(order => {\n          // 使用数据库中存储的商家名称和图片\n          const businessName = order.businessName || order.business?.businessName || '未知商家';\n          const businessImg = order.businessImg || order.business?.businessImg || '';\n          console.log(`订单 ${order.orderId} 的商家图片:`, businessImg ? businessImg.substring(0, 30) + '...' : 'null', '类型:', typeof businessImg);\n\n          // 检查是否有订单详情中的食品图片\n          if (order.orderDetailList && Array.isArray(order.orderDetailList)) {\n            console.log(`订单 ${order.orderId} 的食品图片:`, order.orderDetailList.map(detail => ({\n              foodId: detail.foodId,\n              foodImg: detail.foodImg ? detail.foodImg.substring(0, 30) + '...' : 'null'\n            })));\n          }\n\n          // 打印foodImgs字段的详细信息\n          if (order.foodImgs) {\n            console.log(`订单 ${order.orderId} 的foodImgs字段:`, order.foodImgs);\n            const foodImgsArray = getArrayFromString(order.foodImgs);\n            console.log(`订单 ${order.orderId} 的foodImgs数组:`, foodImgsArray);\n\n            // 检查每个食品图片URL\n            foodImgsArray.forEach((imgUrl, index) => {\n              console.log(`食品图片 ${index}:`, imgUrl);\n              console.log(`处理后的图片URL:`, getImageUrl(imgUrl));\n            });\n          }\n          return {\n            ...order,\n            businessId: order.businessId || order.business?.businessId || '1',\n            businessName: businessName,\n            businessImg: businessImg,\n            orderDate: order.orderDate || new Date(order.orderTime || Date.now()).toLocaleString()\n          };\n        });\n        console.log('处理后的订单数据:', orders.value);\n\n        // 不再需要为每个订单获取商家信息，因为数据库中已经存储了商家名称和图片\n      } catch (error) {\n        console.error('获取订单历史失败:', error);\n\n        // 如果API调用失败，尝试从本地存储获取订单信息\n        const localOrderInfo = localStorage.getItem('orderInfo');\n        if (localOrderInfo) {\n          try {\n            const orderInfo = JSON.parse(localOrderInfo);\n            console.log('使用本地存储的订单信息:', orderInfo);\n\n            // 创建模拟订单数据\n            const mockOrder = {\n              orderId: new Date().getTime(),\n              businessId: orderInfo.businessId,\n              businessName: orderInfo.businessName,\n              businessImg: orderInfo.businessImg,\n              orderDate: orderInfo.orderDate || new Date().toLocaleString(),\n              orderTotal: orderInfo.orderTotal || 0,\n              orderState: 5,\n              // 已完成/待评价\n              foodNames: orderInfo.items?.map(item => item.foodName).join(','),\n              foodImgs: orderInfo.items?.map(item => item.foodImg).join(','),\n              quantities: orderInfo.items?.map(item => item.quantity).join(',')\n            };\n\n            // 使用模拟数据\n            orders.value = [mockOrder];\n\n            // 显示提示\n            ElMessage({\n              message: 'API服务不可用，显示本地存储的订单信息',\n              type: 'warning',\n              duration: 3000\n            });\n          } catch (e) {\n            console.error('解析本地订单信息失败:', e);\n\n            // 使用硬编码的模拟数据\n            useMockData();\n          }\n        } else {\n          // 如果本地存储中没有订单信息，使用硬编码的模拟数据\n          useMockData();\n        }\n      }\n    };\n\n    // 使用硬编码的模拟数据\n    const useMockData = () => {\n      console.log('使用硬编码的模拟订单数据');\n\n      // 创建模拟订单数据\n      const mockOrders = [{\n        orderId: 1,\n        businessId: 1,\n        businessName: '万家饺子（软件园E18店）',\n        businessImg: '/assets/img/BUSINESS/img.png',\n        orderDate: new Date().toLocaleString(),\n        orderTotal: 31,\n        orderState: 5,\n        foodNames: '纯肉鲜肉,玉米鲜肉',\n        foodImgs: '/assets/img/sp01.png,/assets/img/sp01.png',\n        quantities: '1,1'\n      }, {\n        orderId: 2,\n        businessId: 2,\n        businessName: '肯德基麦当劳',\n        businessImg: '/assets/img/BUSINESS/img.png',\n        orderDate: new Date(Date.now() - 86400000).toLocaleString(),\n        // 昨天\n        orderTotal: 45,\n        orderState: 5,\n        foodNames: '汉堡,薯条,可乐',\n        foodImgs: '/assets/img/sp01.png,/assets/img/sp01.png,/assets/img/sp01.png',\n        quantities: '1,1,1'\n      }];\n\n      // 使用模拟数据\n      orders.value = mockOrders;\n\n      // 显示提示\n      ElMessage({\n        message: 'API服务不可用，显示模拟订单数据',\n        type: 'warning',\n        duration: 3000\n      });\n    };\n\n    // 根据选中的标签筛选订单\n    const filteredOrders = computed(() => {\n      if (activeTab.value === 'all') {\n        return orders.value;\n      } else if (activeTab.value === 'inProgress') {\n        // 订单状态：1-已下单/待付款，2-已付款/待接单，3-已接单/配送中\n        return orders.value.filter(order => [1, 2, 3].includes(order.orderState));\n      } else if (activeTab.value === 'toRate') {\n        // 订单状态：5-已完成/待评价\n        return orders.value.filter(order => order.orderState === 5);\n      } else if (activeTab.value === 'refund') {\n        // 订单状态：6-已退款\n        return orders.value.filter(order => order.orderState === 6);\n      }\n      return orders.value;\n    });\n\n    // 获取食品图片的辅助函数\n    const getFoodImage = (order, index) => {\n      try {\n        // 获取食品图片数组\n        const foodImgs = getArrayFromString(order.foodImgs);\n        console.log(`获取订单 ${order.orderId} 的第 ${index} 个食品图片, 图片数组长度: ${foodImgs.length}`);\n\n        // 检查索引是否有效\n        if (index >= 0 && index < foodImgs.length) {\n          const imgPath = foodImgs[index];\n          console.log(`食品图片路径: ${imgPath ? imgPath.length > 50 ? imgPath.substring(0, 50) + '...' : imgPath : 'null'}`);\n\n          // 检查是否是Base64编码\n          if (imgPath && imgPath.length > 100) {\n            return sanitizeBase64(imgPath);\n          }\n\n          // 处理普通图片URL\n          console.log('使用getImageUrl处理普通图片URL');\n          return getImageUrl(imgPath);\n        }\n\n        // 如果索引无效，返回默认图片\n        console.log('索引无效，返回默认图片');\n        return ''; // 返回空字符串表示没有图片\n      } catch (error) {\n        console.error('获取食品图片出错:', error, error.stack);\n        return ''; // 返回空字符串表示没有图片\n      }\n    };\n\n    // 获取食品数量的辅助函数\n    const getFoodQuantity = (order, index) => {\n      try {\n        // 获取数量数组\n        const quantities = getArrayFromString(order.quantities);\n\n        // 检查索引是否有效\n        if (index >= 0 && index < quantities.length) {\n          return quantities[index] || '1';\n        }\n\n        // 如果索引无效，返回默认值\n        return '1';\n      } catch (error) {\n        console.error('获取食品数量出错:', error);\n        return '1';\n      }\n    };\n    const __returned__ = {\n      router,\n      orders,\n      activeTab,\n      baseURL,\n      goBack,\n      setActiveTab,\n      getArrayFromString,\n      getImageUrl,\n      sanitizeBase64,\n      handleImageError,\n      reorder,\n      goToRating,\n      navigateToRating,\n      isOrderRated,\n      fetchOrders,\n      useMockData,\n      filteredOrders,\n      getFoodImage,\n      getFoodQuantity,\n      ref,\n      onMounted,\n      computed,\n      get useRouter() {\n        return useRouter;\n      },\n      get orderApi() {\n        return orderApi;\n      },\n      get businessApi() {\n        return businessApi;\n      },\n      get ElMessage() {\n        return ElMessage;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","useRouter","orderApi","businessApi","ElMessage","baseURL","router","orders","activeTab","fetchOrders","goBack","push","setActiveTab","tab","value","window","scrollTo","getArrayFromString","str","includes","matches","match","length","console","log","parts","currentIndex","iVBORIndex","indexOf","nextIndex","base64Part","substring","trim","startsWith","test","items","commaPositions","i","startPos","pos","beforeComma","Math","max","afterComma","min","isBase64Comma","item","lastItem","split","map","error","getImageUrl","imgPath","require","sanitizeBase64","relativePath","replace","e","base64String","warn","handleImageError","type","target","src","base64Data","reorder","order","businessId","goToRating","business","businessImg","getBusinessById","then","businessInfo","navigateToRating","catch","name","params","orderId","businessName","query","orderDate","isOrderRated","ratingsString","localStorage","getItem","ratings","JSON","parse","isRated","some","r","Number","response","getOrderHistory","Array","isArray","data","possibleOrderArrays","result","content","records","list","arr","stringify","businessImgType","hasBusinessImg","foodImgs","foodImgsArray","foodImgsFirstItem","orderDetailList","detail","foodId","foodImg","forEach","imgUrl","index","Date","orderTime","now","toLocaleString","localOrderInfo","orderInfo","mockOrder","getTime","orderTotal","orderState","foodNames","foodName","join","quantities","quantity","message","duration","useMockData","mockOrders","filteredOrders","filter","getFoodImage","stack","getFoodQuantity"],"sources":["D:/back_elm/vue_elm/src/components/historyComponent.vue"],"sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <div class=\"header\">\n      <div class=\"search\">\n        <div class=\"search-bottom\">\n          <div class=\"back\">\n            <span class=\"iconfont icon-back\" @click=\"goBack\"></span>\n          </div>\n          <div class=\"search-pt\">\n            <span class=\"iconfont icon-sousuo\" style=\"margin-left: 2vw\"></span>\n            <input style=\"flex:6;\" type=\"text\" placeholder=\"历史信息搜索\"/>\n          </div>\n          <div class=\"box\">\n            <span class=\"iconfont icon-gongjuxiang\"></span>\n            <span class=\"iconfont icon-24gf-ellipsis\"></span>\n          </div>\n        </div>\n        <div class=\"information\">\n          <p :class=\"{ active: activeTab === 'all' }\" @click=\"setActiveTab('all')\">全部</p>\n          <p :class=\"{ active: activeTab === 'inProgress' }\" @click=\"setActiveTab('inProgress')\">进行中</p>\n          <p :class=\"{ active: activeTab === 'toRate' }\" @click=\"setActiveTab('toRate')\">待评价</p>\n          <p :class=\"{ active: activeTab === 'refund' }\" @click=\"setActiveTab('refund')\">退款</p>\n        </div>\n      </div>\n    </div>\n    <div class=\"body\">\n      <div v-for=\"order in filteredOrders\" :key=\"order.orderId\" class=\"order-card\">\n        <!-- 订单头部：商家信息和订单总价 -->\n        <div class=\"order-header\">\n          <div class=\"business-info\">\n            <img :src=\"getImageUrl(order.businessImg)\" @error=\"handleImageError($event, 'business')\" class=\"business-img\"/>\n            <div class=\"business-details\">\n              <div class=\"business-name\">{{ order.businessName }}</div>\n              <div class=\"delivery-price\">{{ order.deliveryPrice }}元无门槛</div>\n            </div>\n          </div>\n          <div class=\"order-price\">&#165;{{ order.orderTotal }}</div>\n        </div>\n        \n        <!-- 订单内容：食品列表 -->\n        <div class=\"order-content\">\n          <div class=\"food-list\">\n            <div v-for=\"(foodName, index) in getArrayFromString(order.foodNames)\" :key=\"index\" class=\"food-item\">\n              <div class=\"food-left\">\n                <img \n                  :src=\"getFoodImage(order, index)\" \n                  @error=\"handleImageError($event, 'food')\" \n                  class=\"food-img\"\n                  alt=\"食品图片\"\n                  loading=\"lazy\"\n                  v-if=\"getFoodImage(order, index) !== ''\"\n                />\n                <div v-else class=\"food-img-placeholder\">\n                  <img :src=\"require('@/assets/img/sp01.png')\" class=\"food-img\" alt=\"默认食品图片\" />\n                </div>\n              </div>\n              <div class=\"food-right\">\n                <div class=\"food-name\">{{ foodName || '未知食品' }}</div>\n                <div class=\"food-quantity\">x{{ getFoodQuantity(order, index) }}</div>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <!-- 订单底部：订单时间和操作按钮 -->\n        <div class=\"order-footer\">\n          <div class=\"order-date\">{{ order.orderDate }}</div>\n          <div class=\"order-actions\">\n            <button class=\"reorder-btn\" @click=\"reorder(order)\">再来一单</button>\n            <button \n              v-if=\"isOrderRated(order.orderId)\" \n              class=\"rated-btn\" \n              @click=\"goToRating(order)\"\n            >\n              修改评价\n            </button>\n            <button \n              v-else \n              class=\"rating-btn\" \n              @click=\"goToRating(order)\"\n            >\n              评价订单\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { orderApi } from '../utils/api';\nimport { businessApi } from '../utils/api'; // Added import for businessApi\nimport { ElMessage } from 'element-plus'; // Added ElMessage import\n\nconst router = useRouter();\nconst orders = ref([]);\nconst activeTab = ref('all');\nconst baseURL = 'http://localhost:8090'; // API网关地址\n\nonMounted(() => {\n  fetchOrders();\n});\n\nconst goBack = () => {\n  router.push('/Index-Component');\n};\n\nconst setActiveTab = (tab) => {\n  activeTab.value = tab;\n  // 切换标签时滚动到顶部\n  window.scrollTo(0, 0);\n};\n\n// 将逗号分隔的字符串转换为数组\nconst getArrayFromString = (str) => {\n  if (!str) return [];\n  \n  try {\n    // 检查是否是Base64字符串集合\n    if (typeof str === 'string' && str.includes('data:image')) {\n      // 尝试找到所有的Base64图片\n      const matches = str.match(/data:image\\/[^;]+;base64,[A-Za-z0-9+/=]+/g);\n      if (matches && matches.length > 0) {\n        console.log(`找到 ${matches.length} 个完整的Base64图片`);\n        return matches;\n      }\n    }\n    \n    // 检查是否包含多个iVBOR开头的Base64图片\n    if (typeof str === 'string' && str.includes('iVBOR')) {\n      // 尝试分割多个Base64字符串\n      const parts = [];\n      let currentIndex = 0;\n      \n      while (currentIndex < str.length) {\n        const iVBORIndex = str.indexOf('iVBOR', currentIndex);\n        if (iVBORIndex === -1) break;\n        \n        // 找到下一个iVBOR或字符串结束\n        let nextIndex = str.indexOf('iVBOR', iVBORIndex + 5);\n        if (nextIndex === -1) nextIndex = str.length;\n        \n        // 提取这段Base64数据\n        const base64Part = str.substring(iVBORIndex, nextIndex).trim();\n        if (base64Part.length > 100) {  // 确保是有效的Base64数据\n          parts.push(base64Part);\n        }\n        \n        currentIndex = nextIndex;\n      }\n      \n      if (parts.length > 0) {\n        console.log(`找到 ${parts.length} 个iVBOR开头的Base64图片`);\n        return parts;\n      }\n    }\n    \n    // 如果不是特殊的Base64集合，则按照常规方式处理\n    // 首先检查是否是单个Base64字符串\n    if (typeof str === 'string' && str.length > 100 && \n        (str.startsWith('data:image') || str.startsWith('iVBOR') || \n         /^[A-Za-z0-9+/=]+$/.test(str.substring(0, 20)))) {\n      return [str];\n    }\n    \n    // 尝试按逗号分割，但需要注意不要分割Base64字符串中的逗号\n    const items = [];\n    const commaPositions = [];\n    \n    // 找出所有可能的逗号位置\n    for (let i = 0; i < str.length; i++) {\n      if (str[i] === ',') {\n        commaPositions.push(i);\n      }\n    }\n    \n    // 检查每个逗号是否在Base64字符串内部\n    let startPos = 0;\n    for (const pos of commaPositions) {\n      // 检查逗号前后的字符，判断是否是Base64内部的逗号\n      const beforeComma = str.substring(Math.max(0, pos - 20), pos);\n      const afterComma = str.substring(pos + 1, Math.min(str.length, pos + 21));\n      \n      // 如果逗号前后都是Base64字符，则可能是Base64内部的逗号\n      const isBase64Comma = /^[A-Za-z0-9+/=]+$/.test(beforeComma) && \n                           /^[A-Za-z0-9+/=]+$/.test(afterComma);\n      \n      if (!isBase64Comma) {\n        // 这是一个有效的分隔逗号\n        const item = str.substring(startPos, pos).trim();\n        if (item) items.push(item);\n        startPos = pos + 1;\n      }\n    }\n    \n    // 添加最后一项\n    const lastItem = str.substring(startPos).trim();\n    if (lastItem) items.push(lastItem);\n    \n    // 如果没有成功分割，回退到简单的逗号分割\n    if (items.length === 0) {\n      return str.split(',').map(item => item.trim());\n    }\n    \n    return items;\n  } catch (error) {\n    console.error('分割字符串出错:', error);\n    // 出错时尝试简单的逗号分割\n    try {\n      return str.split(',').map(item => item.trim());\n    } catch {\n      return [str]; // 最后的回退方案\n    }\n  }\n};\n\n// 处理图片URL\nconst getImageUrl = (imgPath) => {\n  if (!imgPath) {\n    return require('@/assets/img/BUSINESS/img.png');\n  }\n  \n  try {\n    // 如果是Base64编码的图片数据\n    if (typeof imgPath === 'string' && imgPath.length > 100) {\n      return sanitizeBase64(imgPath);\n    }\n    \n    // 如果是完整URL，直接返回\n    if (imgPath.startsWith('http')) {\n      return imgPath;\n    }\n    \n    // 如果是以/assets开头的路径，转换为正确的路径\n    if (imgPath.startsWith('/assets/')) {\n      // 去掉开头的/assets/，因为在项目中assets是相对路径\n      const relativePath = imgPath.replace('/assets/', '');\n      try {\n        return require(`@/assets/${relativePath}`);\n      } catch (e) {\n        // 尝试通过API网关获取\n        return baseURL + imgPath;\n      }\n    }\n    \n    // 如果是相对路径，添加baseURL\n    if (imgPath.startsWith('/')) {\n      return baseURL + imgPath;\n    }\n    \n    // 尝试加载项目中的图片\n    try {\n      // 首先尝试从BUSINESS目录加载\n      if (!imgPath.includes('/')) {\n        try {\n          return require('@/assets/img/BUSINESS/' + imgPath);\n        } catch (e) {\n          // 尝试从其他目录加载\n        }\n      }\n      \n      // 然后尝试从普通img目录加载\n      return require('@/assets/img/' + imgPath);\n    } catch (e) {\n      return require('@/assets/img/BUSINESS/img.png');\n    }\n  } catch (error) {\n    console.error('处理图片URL出错:', error);\n    return require('@/assets/img/BUSINESS/img.png');\n  }\n};\n\n// 处理和验证Base64编码的图片\nconst sanitizeBase64 = (base64String) => {\n  try {\n    // 已经是完整的Base64字符串\n    if (base64String.startsWith('data:image/')) {\n      return base64String;\n    }\n    \n    // 检查是否是PNG的Base64编码\n    if (base64String.startsWith('iVBOR')) {\n      return `data:image/png;base64,${base64String}`;\n    }\n    \n    // 检查是否是JPEG的Base64编码\n    if (base64String.startsWith('/9j/')) {\n      return `data:image/jpeg;base64,${base64String}`;\n    }\n    \n    // 检查是否包含无效字符\n    if (!/^[A-Za-z0-9+/=]+$/.test(base64String.replace(/\\s/g, ''))) {\n      console.warn('Base64字符串包含无效字符');\n      return '';\n    }\n    \n    // 检查长度是否合理（Base64编码的图片通常很长）\n    if (base64String.length < 100) {\n      console.warn('Base64字符串长度不足');\n      return '';\n    }\n    \n    // 默认作为PNG处理\n    return `data:image/png;base64,${base64String.replace(/\\s/g, '')}`;\n  } catch (error) {\n    console.error('处理Base64字符串出错:', error);\n    return '';\n  }\n};\n\n// 处理图片加载错误\nconst handleImageError = (e, type) => {\n  console.error(`图片加载失败: ${e.target.src.substring(0, 50)}...`);\n  \n  try {\n    // 检查是否是Base64编码的图片加载失败\n    const src = e.target.src;\n    if (src && src.startsWith('data:image')) {\n      console.log('尝试修复Base64图片...');\n      \n      // 提取Base64部分\n      const base64Data = src.split(',')[1];\n      if (base64Data) {\n        // 尝试使用不同的MIME类型\n        if (src.includes('image/png')) {\n          e.target.src = `data:image/jpeg;base64,${base64Data}`;\n          return;\n        } else if (src.includes('image/jpeg')) {\n          e.target.src = `data:image/png;base64,${base64Data}`;\n          return;\n        }\n      }\n    }\n  } catch (error) {\n    console.error('处理图片错误时出错:', error);\n  }\n  \n  // 使用默认图片\n  if (type === 'business') {\n    e.target.src = require('@/assets/img/BUSINESS/img.png');\n  } else {\n    e.target.src = require('@/assets/img/sp01.png');\n  }\n};\n\n// 再次下单\nconst reorder = (order) => {\n  // 实现再次下单功能\n  router.push(`/business-component/${order.businessId}`);\n};\n\n// 前往评价页面\nconst goToRating = (order) => {\n  console.log('Order object:', order);\n  \n  // 确保businessId存在且为有效值\n  const businessId = order.businessId || order.business?.businessId || '1';\n  \n  // 如果商家图片为空，尝试再次获取\n  if (!order.businessImg && businessId) {\n    businessApi.getBusinessById(businessId)\n      .then(businessInfo => {\n        if (businessInfo && businessInfo.businessImg) {\n          navigateToRating(order, businessInfo.businessImg);\n        } else {\n          navigateToRating(order);\n        }\n      })\n      .catch(error => {\n        console.error('获取商家信息失败:', error);\n        navigateToRating(order);\n      });\n  } else {\n    navigateToRating(order);\n  }\n};\n\n// 导航到评价页面\nconst navigateToRating = (order, businessImg = null) => {\n  router.push({\n    name: 'Rating',\n    params: {\n      orderId: order.orderId || '1',\n      businessId: order.businessId || order.business?.businessId || '1',\n      businessName: order.businessName || '未知商家'\n    },\n    query: {\n      businessImg: businessImg || order.businessImg || '',\n      orderDate: order.orderDate || ''\n    }\n  });\n};\n\n// 检查订单是否已评价\nconst isOrderRated = (orderId) => {\n  try {\n    // 检查本地存储中是否有该订单的评价\n    const ratingsString = localStorage.getItem('localRatings');\n    console.log(`检查订单 ${orderId} 是否已评价, 本地存储:`, ratingsString);\n    \n    if (ratingsString) {\n      const ratings = JSON.parse(ratingsString);\n      console.log('解析后的本地评价:', ratings);\n      \n      // 确保使用数字类型进行比较\n      const isRated = ratings.some(r => r.orderId === Number(orderId));\n      console.log(`订单 ${orderId} 已评价状态:`, isRated);\n      return isRated;\n    }\n  } catch (error) {\n    console.error('检查订单评价状态失败:', error);\n  }\n  return false;\n};\n\nconst fetchOrders = async () => {\n  try {\n    const response = await orderApi.getOrderHistory();\n    console.log('订单历史原始响应:', response);\n    \n    if (response && Array.isArray(response)) {\n      orders.value = response;\n    } else if (response && response.data && Array.isArray(response.data)) {\n      orders.value = response.data;\n    } else if (response && typeof response === 'object') {\n      // 尝试从响应中提取数据\n      console.log('尝试从响应中提取订单数据:', response);\n      const possibleOrderArrays = [\n        response.data,\n        response.result,\n        response.content,\n        response.records,\n        response.list,\n        response.orders\n      ];\n      \n      for (const arr of possibleOrderArrays) {\n        if (arr && Array.isArray(arr)) {\n          console.log('找到订单数组:', arr);\n          orders.value = arr;\n          break;\n        }\n      }\n    }\n    \n    // 详细记录每个订单的图片信息\n    console.log('订单数据处理前:', JSON.stringify(orders.value.map(order => ({\n      orderId: order.orderId,\n      businessImg: order.businessImg ? order.businessImg.substring(0, 30) + '...' : 'null',\n      businessImgType: order.businessImg ? typeof order.businessImg : 'null',\n      hasBusinessImg: !!order.businessImg,\n      foodImgs: order.foodImgs ? order.foodImgs.substring(0, 30) + '...' : 'null',\n      // 添加更多详细的食品图片信息\n      foodImgsArray: getArrayFromString(order.foodImgs),\n      foodImgsFirstItem: getArrayFromString(order.foodImgs)[0] ? getArrayFromString(order.foodImgs)[0].substring(0, 30) + '...' : 'null'\n    }))));\n    \n    // 确保每个订单对象都有必要的属性\n    orders.value = orders.value.map(order => {\n      // 使用数据库中存储的商家名称和图片\n      const businessName = order.businessName || order.business?.businessName || '未知商家';\n      const businessImg = order.businessImg || order.business?.businessImg || '';\n      \n      console.log(`订单 ${order.orderId} 的商家图片:`, \n        businessImg ? businessImg.substring(0, 30) + '...' : 'null',\n        '类型:', typeof businessImg);\n      \n      // 检查是否有订单详情中的食品图片\n      if (order.orderDetailList && Array.isArray(order.orderDetailList)) {\n        console.log(`订单 ${order.orderId} 的食品图片:`, \n          order.orderDetailList.map(detail => ({\n            foodId: detail.foodId,\n            foodImg: detail.foodImg ? detail.foodImg.substring(0, 30) + '...' : 'null'\n          })));\n      }\n      \n      // 打印foodImgs字段的详细信息\n      if (order.foodImgs) {\n        console.log(`订单 ${order.orderId} 的foodImgs字段:`, order.foodImgs);\n        const foodImgsArray = getArrayFromString(order.foodImgs);\n        console.log(`订单 ${order.orderId} 的foodImgs数组:`, foodImgsArray);\n        \n        // 检查每个食品图片URL\n        foodImgsArray.forEach((imgUrl, index) => {\n          console.log(`食品图片 ${index}:`, imgUrl);\n          console.log(`处理后的图片URL:`, getImageUrl(imgUrl));\n        });\n      }\n      \n      return {\n        ...order,\n        businessId: order.businessId || order.business?.businessId || '1',\n        businessName: businessName,\n        businessImg: businessImg,\n        orderDate: order.orderDate || new Date(order.orderTime || Date.now()).toLocaleString()\n      };\n    });\n    \n    console.log('处理后的订单数据:', orders.value);\n    \n    // 不再需要为每个订单获取商家信息，因为数据库中已经存储了商家名称和图片\n  } catch (error) {\n    console.error('获取订单历史失败:', error);\n    \n    // 如果API调用失败，尝试从本地存储获取订单信息\n    const localOrderInfo = localStorage.getItem('orderInfo');\n    if (localOrderInfo) {\n      try {\n        const orderInfo = JSON.parse(localOrderInfo);\n        console.log('使用本地存储的订单信息:', orderInfo);\n        \n        // 创建模拟订单数据\n        const mockOrder = {\n          orderId: new Date().getTime(),\n          businessId: orderInfo.businessId,\n          businessName: orderInfo.businessName,\n          businessImg: orderInfo.businessImg,\n          orderDate: orderInfo.orderDate || new Date().toLocaleString(),\n          orderTotal: orderInfo.orderTotal || 0,\n          orderState: 5, // 已完成/待评价\n          foodNames: orderInfo.items?.map(item => item.foodName).join(','),\n          foodImgs: orderInfo.items?.map(item => item.foodImg).join(','),\n          quantities: orderInfo.items?.map(item => item.quantity).join(',')\n        };\n        \n        // 使用模拟数据\n        orders.value = [mockOrder];\n        \n        // 显示提示\n        ElMessage({\n          message: 'API服务不可用，显示本地存储的订单信息',\n          type: 'warning',\n          duration: 3000\n        });\n      } catch (e) {\n        console.error('解析本地订单信息失败:', e);\n        \n        // 使用硬编码的模拟数据\n        useMockData();\n      }\n    } else {\n      // 如果本地存储中没有订单信息，使用硬编码的模拟数据\n      useMockData();\n    }\n  }\n};\n\n// 使用硬编码的模拟数据\nconst useMockData = () => {\n  console.log('使用硬编码的模拟订单数据');\n  \n  // 创建模拟订单数据\n  const mockOrders = [\n    {\n      orderId: 1,\n      businessId: 1,\n      businessName: '万家饺子（软件园E18店）',\n      businessImg: '/assets/img/BUSINESS/img.png',\n      orderDate: new Date().toLocaleString(),\n      orderTotal: 31,\n      orderState: 5,\n      foodNames: '纯肉鲜肉,玉米鲜肉',\n      foodImgs: '/assets/img/sp01.png,/assets/img/sp01.png',\n      quantities: '1,1'\n    },\n    {\n      orderId: 2,\n      businessId: 2,\n      businessName: '肯德基麦当劳',\n      businessImg: '/assets/img/BUSINESS/img.png',\n      orderDate: new Date(Date.now() - 86400000).toLocaleString(), // 昨天\n      orderTotal: 45,\n      orderState: 5,\n      foodNames: '汉堡,薯条,可乐',\n      foodImgs: '/assets/img/sp01.png,/assets/img/sp01.png,/assets/img/sp01.png',\n      quantities: '1,1,1'\n    }\n  ];\n  \n  // 使用模拟数据\n  orders.value = mockOrders;\n  \n  // 显示提示\n  ElMessage({\n    message: 'API服务不可用，显示模拟订单数据',\n    type: 'warning',\n    duration: 3000\n  });\n};\n\n// 根据选中的标签筛选订单\nconst filteredOrders = computed(() => {\n  if (activeTab.value === 'all') {\n    return orders.value;\n  } else if (activeTab.value === 'inProgress') {\n    // 订单状态：1-已下单/待付款，2-已付款/待接单，3-已接单/配送中\n    return orders.value.filter(order => [1, 2, 3].includes(order.orderState));\n  } else if (activeTab.value === 'toRate') {\n    // 订单状态：5-已完成/待评价\n    return orders.value.filter(order => order.orderState === 5);\n  } else if (activeTab.value === 'refund') {\n    // 订单状态：6-已退款\n    return orders.value.filter(order => order.orderState === 6);\n  }\n  return orders.value;\n});\n\n// 获取食品图片的辅助函数\nconst getFoodImage = (order, index) => {\n  try {\n    // 获取食品图片数组\n    const foodImgs = getArrayFromString(order.foodImgs);\n    console.log(`获取订单 ${order.orderId} 的第 ${index} 个食品图片, 图片数组长度: ${foodImgs.length}`);\n    \n    // 检查索引是否有效\n    if (index >= 0 && index < foodImgs.length) {\n      const imgPath = foodImgs[index];\n      console.log(`食品图片路径: ${imgPath ? (imgPath.length > 50 ? imgPath.substring(0, 50) + '...' : imgPath) : 'null'}`);\n      \n      // 检查是否是Base64编码\n      if (imgPath && imgPath.length > 100) {\n        return sanitizeBase64(imgPath);\n      }\n      \n      // 处理普通图片URL\n      console.log('使用getImageUrl处理普通图片URL');\n      return getImageUrl(imgPath);\n    }\n    \n    // 如果索引无效，返回默认图片\n    console.log('索引无效，返回默认图片');\n    return ''; // 返回空字符串表示没有图片\n  } catch (error) {\n    console.error('获取食品图片出错:', error, error.stack);\n    return ''; // 返回空字符串表示没有图片\n  }\n};\n\n// 获取食品数量的辅助函数\nconst getFoodQuantity = (order, index) => {\n  try {\n    // 获取数量数组\n    const quantities = getArrayFromString(order.quantities);\n    \n    // 检查索引是否有效\n    if (index >= 0 && index < quantities.length) {\n      return quantities[index] || '1';\n    }\n    \n    // 如果索引无效，返回默认值\n    return '1';\n  } catch (error) {\n    console.error('获取食品数量出错:', error);\n    return '1';\n  }\n};\n</script>\n\n<style scoped>\n.wrapper {\n  width: 100%;\n  height: 100%;\n  background-color: #f5f5f5;\n  padding-bottom: 20px;\n}\n\n.header {\n  background-color: white;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  z-index: 10;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n}\n\n.search-bottom {\n  display: flex;\n  align-items: center;\n  padding: 10px;\n  height: 40px;\n}\n\n.back .icon-back {\n  font-size: 20px;\n  padding: 0 10px;\n}\n\n.search-pt {\n  flex: 1;\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.search-pt input {\n  width: 100%;\n  border: none;\n  background-color: #f5f5f5;\n  padding: 8px 8px 8px 30px;\n  border-radius: 20px;\n  font-size: 14px;\n}\n\n.search-pt .icon-sousuo {\n  position: absolute;\n  left: 10px;\n  font-size: 16px;\n  color: #999;\n}\n\n.box span {\n  padding: 0 10px;\n  font-size: 20px;\n}\n\n.information {\n  display: flex;\n  justify-content: space-around;\n  padding: 10px 0;\n  border-bottom: 1px solid #eee;\n}\n\n.information p {\n  padding: 5px 10px;\n  cursor: pointer;\n  position: relative;\n}\n\n.information p.active {\n  color: #0097ff;\n  font-weight: bold;\n}\n\n.information p.active::after {\n  content: '';\n  position: absolute;\n  bottom: -5px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 20px;\n  height: 3px;\n  background-color: #0097ff;\n  border-radius: 3px;\n}\n\n.body {\n  margin-top: 100px;\n  padding: 10px;\n}\n\n.order-card {\n  background-color: white;\n  border-radius: 10px;\n  margin-bottom: 15px;\n  padding: 15px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n}\n\n.order-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #f0f0f0;\n}\n\n.business-info {\n  display: flex;\n  align-items: center;\n}\n\n.business-img {\n  width: 50px;\n  height: 50px;\n  border-radius: 5px;\n  object-fit: cover;\n  margin-right: 10px;\n}\n\n.business-details {\n  display: flex;\n  flex-direction: column;\n}\n\n.business-name {\n  font-weight: bold;\n  font-size: 16px;\n  margin-bottom: 5px;\n}\n\n.delivery-price {\n  font-size: 12px;\n  color: #ff6b01;\n  background-color: #fff5e6;\n  padding: 2px 5px;\n  border-radius: 3px;\n  display: inline-block;\n}\n\n.order-price {\n  font-size: 16px;\n  font-weight: bold;\n  color: #333;\n}\n\n.order-content {\n  padding: 10px 0;\n}\n\n.food-list {\n  display: flex;\n  flex-direction: column;\n}\n\n.food-item {\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n  background-color: #f9f9f9;\n  border-radius: 8px;\n  padding: 10px;\n}\n\n.food-left {\n  margin-right: 15px;\n}\n\n.food-img {\n  width: 60px;\n  height: 60px;\n  border-radius: 5px;\n  object-fit: cover;\n}\n\n.food-img-placeholder {\n  width: 60px;\n  height: 60px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #f0f0f0;\n  border-radius: 5px;\n}\n\n.food-img-placeholder img {\n  width: 30px;\n  height: 30px;\n}\n\n.food-right {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.food-name {\n  font-size: 14px;\n  font-weight: 500;\n  margin-bottom: 8px;\n}\n\n.food-quantity {\n  font-size: 12px;\n  color: #666;\n  background-color: #f0f0f0;\n  padding: 2px 8px;\n  border-radius: 12px;\n  display: inline-block;\n  width: fit-content;\n}\n\n.order-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 10px;\n  border-top: 1px solid #f0f0f0;\n}\n\n.order-date {\n  font-size: 12px;\n  color: #999;\n}\n\n.order-actions {\n  display: flex;\n  gap: 10px;\n}\n\n.reorder-btn, .rating-btn, .rated-btn {\n  border: none;\n  padding: 8px 15px;\n  border-radius: 20px;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n.reorder-btn {\n  background-color: #0097ff;\n  color: white;\n}\n\n.rating-btn {\n  background-color: #ff6b01;\n  color: white;\n}\n\n.rated-btn {\n  background-color: #4caf50;\n  color: white;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}