{"ast":null,"code":"import axios from 'axios';\nimport { getToken } from './auth';\n\n// 创建axios实例\nconst api = axios.create({\n  baseURL: 'http://localhost:8082',\n  // 通过API网关访问所有微服务\n  timeout: 10000\n});\n\n// 请求拦截器\napi.interceptors.request.use(config => {\n  const token = getToken();\n  if (token) {\n    config.headers['Authorization'] = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// 响应拦截器\napi.interceptors.response.use(response => {\n  return response.data;\n}, error => {\n  if (error.response && error.response.status === 401) {\n    // 未授权，可以在这里处理登出逻辑\n    // removeToken();\n    // router.push('/login');\n  }\n  return Promise.reject(error);\n});\n\n// 用户相关API\nexport const userApi = {\n  login: data => api.post('/user/login', data),\n  register: data => api.post('/user/register', data),\n  getUserInfo: userId => api.get(`/user/${userId}`)\n};\n\n// 商家相关API\nexport const businessApi = {\n  getBusinessList: (page, size) => api.get(`/business/list?page=${page}&size=${size}`),\n  getBusinessById: businessId => api.get(`/business/${businessId}`),\n  getFoodsByBusinessId: businessId => api.get(`/food/listByBusinessId/${businessId}`)\n};\n\n// 订单相关API\nexport const orderApi = {\n  createOrder: data => api.post('/orders/', data),\n  getOrderById: orderId => api.get(`/orders/${orderId}`),\n  getOrdersByUserId: userId => api.get(`/orders/user/${userId}`)\n};\n\n// 购物车相关API\nexport const cartApi = {\n  addToCart: data => api.post('/cart/', data),\n  getCartByUserId: userId => api.get(`/cart/user/${userId}`),\n  deleteCartItem: cartId => api.delete(`/cart/${cartId}`),\n  checkout: () => api.post('/cart/checkout')\n};\n\n// 配送地址相关API\nexport const deliveryAddressApi = {\n  getDeliveryAddressesByUserId: userId => api.get(`/deliveryAddress/listByUserId/${userId}`),\n  addDeliveryAddress: data => api.post('/deliveryAddress/', data),\n  updateDeliveryAddress: data => api.put('/deliveryAddress/', data),\n  deleteDeliveryAddress: daId => api.delete(`/deliveryAddress/${daId}`)\n};\n\n// 支付相关API\nexport const paymentApi = {\n  processPayment: data => api.post('/payment/process', data),\n  verifyPayment: paymentId => api.get(`/payment/verify/${paymentId}`)\n};\n\n// 评价相关API\nexport const ratingApi = {\n  submitRating: data => api.post('/rating/', data),\n  getRatingsByBusinessId: businessId => api.get(`/rating/business/${businessId}`)\n};\nexport default api;","map":{"version":3,"names":["axios","getToken","api","create","baseURL","timeout","interceptors","request","use","config","token","headers","error","Promise","reject","response","data","status","userApi","login","post","register","getUserInfo","userId","get","businessApi","getBusinessList","page","size","getBusinessById","businessId","getFoodsByBusinessId","orderApi","createOrder","getOrderById","orderId","getOrdersByUserId","cartApi","addToCart","getCartByUserId","deleteCartItem","cartId","delete","checkout","deliveryAddressApi","getDeliveryAddressesByUserId","addDeliveryAddress","updateDeliveryAddress","put","deleteDeliveryAddress","daId","paymentApi","processPayment","verifyPayment","paymentId","ratingApi","submitRating","getRatingsByBusinessId"],"sources":["D:/back_elm/vue_elm/src/utils/api.js"],"sourcesContent":["import axios from 'axios';\r\nimport { getToken } from './auth';\r\n\r\n// 创建axios实例\r\nconst api = axios.create({\r\n  baseURL: 'http://localhost:8082', // 通过API网关访问所有微服务\r\n  timeout: 10000\r\n});\r\n\r\n// 请求拦截器\r\napi.interceptors.request.use(\r\n  config => {\r\n    const token = getToken();\r\n    if (token) {\r\n      config.headers['Authorization'] = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  error => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// 响应拦截器\r\napi.interceptors.response.use(\r\n  response => {\r\n    return response.data;\r\n  },\r\n  error => {\r\n    if (error.response && error.response.status === 401) {\r\n      // 未授权，可以在这里处理登出逻辑\r\n      // removeToken();\r\n      // router.push('/login');\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// 用户相关API\r\nexport const userApi = {\r\n  login: (data) => api.post('/user/login', data),\r\n  register: (data) => api.post('/user/register', data),\r\n  getUserInfo: (userId) => api.get(`/user/${userId}`)\r\n};\r\n\r\n// 商家相关API\r\nexport const businessApi = {\r\n  getBusinessList: (page, size) => api.get(`/business/list?page=${page}&size=${size}`),\r\n  getBusinessById: (businessId) => api.get(`/business/${businessId}`),\r\n  getFoodsByBusinessId: (businessId) => api.get(`/food/listByBusinessId/${businessId}`)\r\n};\r\n\r\n// 订单相关API\r\nexport const orderApi = {\r\n  createOrder: (data) => api.post('/orders/', data),\r\n  getOrderById: (orderId) => api.get(`/orders/${orderId}`),\r\n  getOrdersByUserId: (userId) => api.get(`/orders/user/${userId}`)\r\n};\r\n\r\n// 购物车相关API\r\nexport const cartApi = {\r\n  addToCart: (data) => api.post('/cart/', data),\r\n  getCartByUserId: (userId) => api.get(`/cart/user/${userId}`),\r\n  deleteCartItem: (cartId) => api.delete(`/cart/${cartId}`),\r\n  checkout: () => api.post('/cart/checkout')\r\n};\r\n\r\n// 配送地址相关API\r\nexport const deliveryAddressApi = {\r\n  getDeliveryAddressesByUserId: (userId) => api.get(`/deliveryAddress/listByUserId/${userId}`),\r\n  addDeliveryAddress: (data) => api.post('/deliveryAddress/', data),\r\n  updateDeliveryAddress: (data) => api.put('/deliveryAddress/', data),\r\n  deleteDeliveryAddress: (daId) => api.delete(`/deliveryAddress/${daId}`)\r\n};\r\n\r\n// 支付相关API\r\nexport const paymentApi = {\r\n  processPayment: (data) => api.post('/payment/process', data),\r\n  verifyPayment: (paymentId) => api.get(`/payment/verify/${paymentId}`)\r\n};\r\n\r\n// 评价相关API\r\nexport const ratingApi = {\r\n  submitRating: (data) => api.post('/rating/', data),\r\n  getRatingsByBusinessId: (businessId) => api.get(`/rating/business/${businessId}`)\r\n};\r\n\r\nexport default api; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}