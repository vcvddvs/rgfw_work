{"ast":null,"code":"import { ref, reactive } from 'vue';\nimport { ElForm, ElFormItem, ElInput, ElButton } from 'element-plus';\nexport default {\n  __name: 'updataComponent',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const ruleFormRef = ref(null);\n    const ruleForm = reactive({\n      pass: '',\n      checkPass: '',\n      age: ''\n    });\n    const rules = reactive({\n      pass: [{\n        validator: validatePass,\n        trigger: 'blur'\n      }],\n      checkPass: [{\n        validator: validatePass2,\n        trigger: 'blur'\n      }],\n      age: [{\n        validator: checkAge,\n        trigger: 'blur'\n      }]\n    });\n    function checkAge(rule, value, callback) {\n      if (!value) {\n        return callback(new Error('年龄不能为空'));\n      }\n      setTimeout(() => {\n        if (!Number.isInteger(value)) {\n          callback(new Error('请输入数字值'));\n        } else {\n          if (value < 18) {\n            callback(new Error('必须年满18岁'));\n          } else {\n            callback();\n          }\n        }\n      }, 1000);\n    }\n    function validatePass(rule, value, callback) {\n      if (value === '') {\n        callback(new Error('请输入密码'));\n      } else {\n        if (ruleForm.checkPass !== '') {\n          // 这里需要使用 ruleFormRef 来访问另一个字段\n          ruleFormRef.value.validateField('checkPass');\n        }\n        callback();\n      }\n    }\n    function validatePass2(rule, value, callback) {\n      if (value === '') {\n        callback(new Error('请再次输入密码'));\n      } else if (value !== ruleForm.pass) {\n        callback(new Error('两次输入密码不一致!'));\n      } else {\n        callback();\n      }\n    }\n    function submitForm() {\n      ruleFormRef.value.validate(valid => {\n        if (valid) {\n          alert('submit!');\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    }\n    function resetForm() {\n      ruleFormRef.value.resetFields();\n    }\n    const __returned__ = {\n      ruleFormRef,\n      ruleForm,\n      rules,\n      checkAge,\n      validatePass,\n      validatePass2,\n      submitForm,\n      resetForm,\n      ref,\n      reactive,\n      get ElForm() {\n        return ElForm;\n      },\n      get ElFormItem() {\n        return ElFormItem;\n      },\n      get ElInput() {\n        return ElInput;\n      },\n      get ElButton() {\n        return ElButton;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","reactive","ElForm","ElFormItem","ElInput","ElButton","ruleFormRef","ruleForm","pass","checkPass","age","rules","validator","validatePass","trigger","validatePass2","checkAge","rule","value","callback","Error","setTimeout","Number","isInteger","validateField","submitForm","validate","valid","alert","console","log","resetForm","resetFields"],"sources":["C:/Users/asus/Desktop/vue_elm/vue_elm/src/components/updataComponent.vue"],"sourcesContent":["<template>\r\n  <el-form ref=\"ruleFormRef\" :model=\"ruleForm\" :rules=\"rules\">\r\n    <el-form-item label=\"密码\" prop=\"pass\">\r\n      <el-input v-model=\"ruleForm.pass\" autocomplete=\"off\"></el-input>\r\n    </el-form-item>\r\n    <el-form-item label=\"确认密码\" prop=\"checkPass\">\r\n      <el-input v-model=\"ruleForm.checkPass\" autocomplete=\"off\"></el-input>\r\n    </el-form-item>\r\n    <el-form-item label=\"年龄\" prop=\"age\">\r\n      <el-input v-model=\"ruleForm.age\" autocomplete=\"off\"></el-input>\r\n    </el-form-item>\r\n    <el-button type=\"primary\" @click=\"submitForm\">提交</el-button>\r\n    <el-button @click=\"resetForm\">重置</el-button>\r\n  </el-form>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive } from 'vue';\r\nimport { ElForm, ElFormItem, ElInput, ElButton } from 'element-plus';\r\n\r\nconst ruleFormRef = ref(null);\r\nconst ruleForm = reactive({\r\n  pass: '',\r\n  checkPass: '',\r\n  age: ''\r\n});\r\n\r\nconst rules = reactive({\r\n  pass: [\r\n    { validator: validatePass, trigger: 'blur' }\r\n  ],\r\n  checkPass: [\r\n    { validator: validatePass2, trigger: 'blur' }\r\n  ],\r\n  age: [\r\n    { validator: checkAge, trigger: 'blur' }\r\n  ]\r\n});\r\n\r\nfunction checkAge(rule, value, callback) {\r\n  if (!value) {\r\n    return callback(new Error('年龄不能为空'));\r\n  }\r\n  setTimeout(() => {\r\n    if (!Number.isInteger(value)) {\r\n      callback(new Error('请输入数字值'));\r\n    } else {\r\n      if (value < 18) {\r\n        callback(new Error('必须年满18岁'));\r\n      } else {\r\n        callback();\r\n      }\r\n    }\r\n  }, 1000);\r\n}\r\n\r\nfunction validatePass(rule, value, callback) {\r\n  if (value === '') {\r\n    callback(new Error('请输入密码'));\r\n  } else {\r\n    if (ruleForm.checkPass !== '') {\r\n      // 这里需要使用 ruleFormRef 来访问另一个字段\r\n      ruleFormRef.value.validateField('checkPass');\r\n    }\r\n    callback();\r\n  }\r\n}\r\n\r\nfunction validatePass2(rule, value, callback) {\r\n  if (value === '') {\r\n    callback(new Error('请再次输入密码'));\r\n  } else if (value !== ruleForm.pass) {\r\n    callback(new Error('两次输入密码不一致!'));\r\n  } else {\r\n    callback();\r\n  }\r\n}\r\n\r\nfunction submitForm() {\r\n  ruleFormRef.value.validate((valid) => {\r\n    if (valid) {\r\n      alert('submit!');\r\n    } else {\r\n      console.log('error submit!!');\r\n      return false;\r\n    }\r\n  });\r\n}\r\n\r\nfunction resetForm() {\r\n  ruleFormRef.value.resetFields();\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* Add your CSS styles here */\r\n</style>"],"mappings":"AAiBA,SAASA,GAAG,EAAEC,QAAQ,QAAQ,KAAK;AACnC,SAASC,MAAM,EAAEC,UAAU,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,cAAc;;;;;;;IAEpE,MAAMC,WAAW,GAAGN,GAAG,CAAC,IAAI,CAAC;IAC7B,MAAMO,QAAQ,GAAGN,QAAQ,CAAC;MACxBO,IAAI,EAAE,EAAE;MACRC,SAAS,EAAE,EAAE;MACbC,GAAG,EAAE;IACP,CAAC,CAAC;IAEF,MAAMC,KAAK,GAAGV,QAAQ,CAAC;MACrBO,IAAI,EAAE,CACJ;QAAEI,SAAS,EAAEC,YAAY;QAAEC,OAAO,EAAE;MAAO,CAAC,CAC7C;MACDL,SAAS,EAAE,CACT;QAAEG,SAAS,EAAEG,aAAa;QAAED,OAAO,EAAE;MAAO,CAAC,CAC9C;MACDJ,GAAG,EAAE,CACH;QAAEE,SAAS,EAAEI,QAAQ;QAAEF,OAAO,EAAE;MAAO,CAAC;IAE5C,CAAC,CAAC;IAEF,SAASE,QAAQA,CAACC,IAAI,EAAEC,KAAK,EAAEC,QAAQ,EAAE;MACvC,IAAI,CAACD,KAAK,EAAE;QACV,OAAOC,QAAQ,CAAC,IAAIC,KAAK,CAAC,QAAQ,CAAC,CAAC;MACtC;MACAC,UAAU,CAAC,MAAM;QACf,IAAI,CAACC,MAAM,CAACC,SAAS,CAACL,KAAK,CAAC,EAAE;UAC5BC,QAAQ,CAAC,IAAIC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAC/B,CAAC,MAAM;UACL,IAAIF,KAAK,GAAG,EAAE,EAAE;YACdC,QAAQ,CAAC,IAAIC,KAAK,CAAC,SAAS,CAAC,CAAC;UAChC,CAAC,MAAM;YACLD,QAAQ,CAAC,CAAC;UACZ;QACF;MACF,CAAC,EAAE,IAAI,CAAC;IACV;IAEA,SAASN,YAAYA,CAACI,IAAI,EAAEC,KAAK,EAAEC,QAAQ,EAAE;MAC3C,IAAID,KAAK,KAAK,EAAE,EAAE;QAChBC,QAAQ,CAAC,IAAIC,KAAK,CAAC,OAAO,CAAC,CAAC;MAC9B,CAAC,MAAM;QACL,IAAIb,QAAQ,CAACE,SAAS,KAAK,EAAE,EAAE;UAC7B;UACAH,WAAW,CAACY,KAAK,CAACM,aAAa,CAAC,WAAW,CAAC;QAC9C;QACAL,QAAQ,CAAC,CAAC;MACZ;IACF;IAEA,SAASJ,aAAaA,CAACE,IAAI,EAAEC,KAAK,EAAEC,QAAQ,EAAE;MAC5C,IAAID,KAAK,KAAK,EAAE,EAAE;QAChBC,QAAQ,CAAC,IAAIC,KAAK,CAAC,SAAS,CAAC,CAAC;MAChC,CAAC,MAAM,IAAIF,KAAK,KAAKX,QAAQ,CAACC,IAAI,EAAE;QAClCW,QAAQ,CAAC,IAAIC,KAAK,CAAC,YAAY,CAAC,CAAC;MACnC,CAAC,MAAM;QACLD,QAAQ,CAAC,CAAC;MACZ;IACF;IAEA,SAASM,UAAUA,CAAA,EAAG;MACpBnB,WAAW,CAACY,KAAK,CAACQ,QAAQ,CAAEC,KAAK,IAAK;QACpC,IAAIA,KAAK,EAAE;UACTC,KAAK,CAAC,SAAS,CAAC;QAClB,CAAC,MAAM;UACLC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;UAC7B,OAAO,KAAK;QACd;MACF,CAAC,CAAC;IACJ;IAEA,SAASC,SAASA,CAAA,EAAG;MACnBzB,WAAW,CAACY,KAAK,CAACc,WAAW,CAAC,CAAC;IACjC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}