{"ast":null,"code":"import { createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"wrapper\"\n};\nconst _hoisted_2 = {\n  class: \"header\"\n};\nconst _hoisted_3 = {\n  class: \"search\"\n};\nconst _hoisted_4 = {\n  class: \"information\"\n};\nconst _hoisted_5 = {\n  class: \"body\"\n};\nconst _hoisted_6 = {\n  class: \"order-header\"\n};\nconst _hoisted_7 = {\n  class: \"business-info\"\n};\nconst _hoisted_8 = [\"src\"];\nconst _hoisted_9 = {\n  class: \"business-details\"\n};\nconst _hoisted_10 = {\n  class: \"business-name\"\n};\nconst _hoisted_11 = {\n  class: \"delivery-price\"\n};\nconst _hoisted_12 = {\n  class: \"order-price\"\n};\nconst _hoisted_13 = {\n  class: \"order-items\"\n};\nconst _hoisted_14 = [\"src\"];\nconst _hoisted_15 = {\n  class: \"food-details\"\n};\nconst _hoisted_16 = {\n  class: \"food-name\"\n};\nconst _hoisted_17 = {\n  class: \"quantity\"\n};\nconst _hoisted_18 = {\n  class: \"order-footer\"\n};\nconst _hoisted_19 = {\n  class: \"order-date\"\n};\nconst _hoisted_20 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", {\n    class: \"search-bottom\"\n  }, [_createElementVNode(\"div\", {\n    class: \"back\"\n  }, [_createElementVNode(\"span\", {\n    class: \"iconfont icon-back\",\n    onClick: $setup.goBack\n  })]), _cache[6] || (_cache[6] = _createStaticVNode(\"<div class=\\\"search-pt\\\" data-v-4f308659><span class=\\\"iconfont icon-sousuo\\\" style=\\\"margin-left:2vw;\\\" data-v-4f308659></span><input style=\\\"flex:6;\\\" type=\\\"text\\\" placeholder=\\\"历史信息搜索\\\" data-v-4f308659></div><div class=\\\"box\\\" data-v-4f308659><span class=\\\"iconfont icon-gongjuxiang\\\" data-v-4f308659></span><span class=\\\"iconfont icon-24gf-ellipsis\\\" data-v-4f308659></span></div>\", 2))]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"p\", {\n    class: _normalizeClass({\n      active: $setup.activeTab === 'all'\n    }),\n    onClick: _cache[0] || (_cache[0] = $event => $setup.setActiveTab('all'))\n  }, \"全部\", 2 /* CLASS */), _createElementVNode(\"p\", {\n    class: _normalizeClass({\n      active: $setup.activeTab === 'inProgress'\n    }),\n    onClick: _cache[1] || (_cache[1] = $event => $setup.setActiveTab('inProgress'))\n  }, \"进行中\", 2 /* CLASS */), _createElementVNode(\"p\", {\n    class: _normalizeClass({\n      active: $setup.activeTab === 'toRate'\n    }),\n    onClick: _cache[2] || (_cache[2] = $event => $setup.setActiveTab('toRate'))\n  }, \"待评价\", 2 /* CLASS */), _createElementVNode(\"p\", {\n    class: _normalizeClass({\n      active: $setup.activeTab === 'refund'\n    }),\n    onClick: _cache[3] || (_cache[3] = $event => $setup.setActiveTab('refund'))\n  }, \"退款\", 2 /* CLASS */)])])]), _createElementVNode(\"div\", _hoisted_5, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.orders, order => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: order.orderId,\n      class: \"order-card\"\n    }, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"img\", {\n      src: order.businessImg,\n      onError: _cache[4] || (_cache[4] = $event => $setup.handleImageError($event, 'business')),\n      class: \"business-img\"\n    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_8), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, _toDisplayString(order.businessName), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_11, _toDisplayString(order.deliveryPrice) + \"元无门槛\", 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_12, \"¥\" + _toDisplayString(order.orderTotal), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_13, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.getArrayFromString(order.foodImgs), (img, index) => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: index,\n        class: \"food-item\"\n      }, [_createElementVNode(\"img\", {\n        src: img,\n        onError: _cache[5] || (_cache[5] = $event => $setup.handleImageError($event, 'food')),\n        class: \"food-img\"\n      }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_14), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"div\", _hoisted_16, _toDisplayString($setup.getArrayFromString(order.foodNames)[index] || '未知食品'), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_17, \"x\" + _toDisplayString($setup.getArrayFromString(order.quantities)[index] || '1'), 1 /* TEXT */)])]);\n    }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"div\", _hoisted_19, _toDisplayString(order.orderDate), 1 /* TEXT */), _createElementVNode(\"button\", {\n      class: \"reorder-btn\",\n      onClick: $event => $setup.reorder(order)\n    }, \"再来一单\", 8 /* PROPS */, _hoisted_20)])]);\n  }), 128 /* KEYED_FRAGMENT */))])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","onClick","$setup","goBack","_createStaticVNode","_hoisted_4","_normalizeClass","active","activeTab","_cache","$event","setActiveTab","_hoisted_5","_Fragment","_renderList","orders","order","key","orderId","_hoisted_6","_hoisted_7","src","businessImg","onError","handleImageError","_hoisted_8","_hoisted_9","_hoisted_10","_toDisplayString","businessName","_hoisted_11","deliveryPrice","_hoisted_12","orderTotal","_hoisted_13","getArrayFromString","foodImgs","img","index","_hoisted_14","_hoisted_15","_hoisted_16","foodNames","_hoisted_17","quantities","_hoisted_18","_hoisted_19","orderDate","reorder","_hoisted_20"],"sources":["D:\\back_elm\\vue_elm\\src\\components\\historyComponent.vue"],"sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <div class=\"header\">\n      <div class=\"search\">\n        <div class=\"search-bottom\">\n          <div class=\"back\">\n            <span class=\"iconfont icon-back\" @click=\"goBack\"></span>\n          </div>\n          <div class=\"search-pt\">\n            <span class=\"iconfont icon-sousuo\" style=\"margin-left: 2vw\"></span>\n            <input style=\"flex:6;\" type=\"text\" placeholder=\"历史信息搜索\"/>\n          </div>\n          <div class=\"box\">\n            <span class=\"iconfont icon-gongjuxiang\"></span>\n            <span class=\"iconfont icon-24gf-ellipsis\"></span>\n          </div>\n        </div>\n        <div class=\"information\">\n          <p :class=\"{ active: activeTab === 'all' }\" @click=\"setActiveTab('all')\">全部</p>\n          <p :class=\"{ active: activeTab === 'inProgress' }\" @click=\"setActiveTab('inProgress')\">进行中</p>\n          <p :class=\"{ active: activeTab === 'toRate' }\" @click=\"setActiveTab('toRate')\">待评价</p>\n          <p :class=\"{ active: activeTab === 'refund' }\" @click=\"setActiveTab('refund')\">退款</p>\n        </div>\n      </div>\n    </div>\n    <div class=\"body\">\n      <div v-for=\"order in orders\" :key=\"order.orderId\" class=\"order-card\">\n        <div class=\"order-header\">\n          <div class=\"business-info\">\n            <img :src=\"order.businessImg\" @error=\"handleImageError($event, 'business')\" class=\"business-img\"/>\n            <div class=\"business-details\">\n              <div class=\"business-name\">{{ order.businessName }}</div>\n              <div class=\"delivery-price\">{{ order.deliveryPrice }}元无门槛</div>\n            </div>\n          </div>\n          <div class=\"order-price\">&#165;{{ order.orderTotal }}</div>\n        </div>\n        \n        <div class=\"order-items\">\n          <div v-for=\"(img, index) in getArrayFromString(order.foodImgs)\" :key=\"index\" class=\"food-item\">\n            <img :src=\"img\" @error=\"handleImageError($event, 'food')\" class=\"food-img\"/>\n            <div class=\"food-details\">\n              <div class=\"food-name\">{{ getArrayFromString(order.foodNames)[index] || '未知食品' }}</div>\n              <div class=\"quantity\">x{{ getArrayFromString(order.quantities)[index] || '1' }}</div>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"order-footer\">\n          <div class=\"order-date\">{{ order.orderDate }}</div>\n          <button class=\"reorder-btn\" @click=\"reorder(order)\">再来一单</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { orderApi } from '../utils/api';\n\nconst router = useRouter();\nconst orders = ref([]);\nconst activeTab = ref('all');\n\nonMounted(() => {\n  fetchOrders();\n});\n\nconst goBack = () => {\n  router.push('/Index-Component');\n};\n\nconst setActiveTab = (tab) => {\n  activeTab.value = tab;\n  // 这里可以根据选中的标签筛选订单\n};\n\n// 将逗号分隔的字符串转换为数组\nconst getArrayFromString = (str) => {\n  if (!str) return [];\n  return str.split(',');\n};\n\n// 处理图片加载错误\nconst handleImageError = (e, type) => {\n  if (type === 'business') {\n    e.target.src = '/assets/img/BUSINESS/img.png';\n  } else {\n    e.target.src = '/assets/img/sp01.png';\n  }\n};\n\n// 再次下单\nconst reorder = (order) => {\n  // 实现再次下单功能\n  router.push(`/business-component/${order.businessId}`);\n};\n\nconst fetchOrders = async () => {\n  try {\n    const response = await orderApi.getOrderHistory();\n    console.log('Order response:', response);\n    \n    if (response && Array.isArray(response)) {\n      orders.value = response;\n    } else if (response && response.data && Array.isArray(response.data)) {\n      orders.value = response.data;\n    }\n    \n    console.log('Processed orders:', orders.value);\n  } catch (error) {\n    console.error('Error fetching orders:', error);\n  }\n};\n</script>\n\n<style scoped>\n.wrapper {\n  width: 100%;\n  height: 100%;\n  background-color: #f5f5f5;\n  padding-bottom: 20px;\n}\n\n.header {\n  background-color: white;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  z-index: 10;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n}\n\n.search-bottom {\n  display: flex;\n  align-items: center;\n  padding: 10px;\n  height: 40px;\n}\n\n.back .icon-back {\n  font-size: 20px;\n  padding: 0 10px;\n}\n\n.search-pt {\n  flex: 1;\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.search-pt input {\n  width: 100%;\n  border: none;\n  background-color: #f5f5f5;\n  padding: 8px 8px 8px 30px;\n  border-radius: 20px;\n  font-size: 14px;\n}\n\n.search-pt .icon-sousuo {\n  position: absolute;\n  left: 10px;\n  font-size: 16px;\n  color: #999;\n}\n\n.box span {\n  padding: 0 10px;\n  font-size: 20px;\n}\n\n.information {\n  display: flex;\n  justify-content: space-around;\n  padding: 10px 0;\n  border-bottom: 1px solid #eee;\n}\n\n.information p {\n  padding: 5px 10px;\n  cursor: pointer;\n  position: relative;\n}\n\n.information p.active {\n  color: #0097ff;\n  font-weight: bold;\n}\n\n.information p.active::after {\n  content: '';\n  position: absolute;\n  bottom: -5px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 20px;\n  height: 3px;\n  background-color: #0097ff;\n  border-radius: 3px;\n}\n\n.body {\n  margin-top: 100px;\n  padding: 10px;\n}\n\n.order-card {\n  background-color: white;\n  border-radius: 10px;\n  margin-bottom: 15px;\n  padding: 15px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n}\n\n.order-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #f0f0f0;\n}\n\n.business-info {\n  display: flex;\n  align-items: center;\n}\n\n.business-img {\n  width: 50px;\n  height: 50px;\n  border-radius: 5px;\n  object-fit: cover;\n  margin-right: 10px;\n}\n\n.business-details {\n  display: flex;\n  flex-direction: column;\n}\n\n.business-name {\n  font-weight: bold;\n  font-size: 16px;\n  margin-bottom: 5px;\n}\n\n.delivery-price {\n  font-size: 12px;\n  color: #ff6b01;\n  background-color: #fff5e6;\n  padding: 2px 5px;\n  border-radius: 3px;\n  display: inline-block;\n}\n\n.order-price {\n  font-size: 16px;\n  font-weight: bold;\n  color: #333;\n}\n\n.order-items {\n  display: flex;\n  flex-direction: column;\n  padding: 10px 0;\n}\n\n.food-item {\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n  background-color: #f9f9f9;\n  border-radius: 5px;\n  padding: 8px;\n}\n\n.food-img {\n  width: 60px;\n  height: 60px;\n  border-radius: 5px;\n  object-fit: cover;\n}\n\n.food-details {\n  margin-left: 10px;\n  flex: 1;\n}\n\n.food-name {\n  font-size: 14px;\n  margin-bottom: 5px;\n}\n\n.quantity {\n  font-size: 12px;\n  color: #666;\n  background-color: #f0f0f0;\n  padding: 2px 5px;\n  border-radius: 10px;\n  display: inline-block;\n}\n\n.order-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 10px;\n  border-top: 1px solid #f0f0f0;\n}\n\n.order-date {\n  font-size: 12px;\n  color: #999;\n}\n\n.reorder-btn {\n  background-color: #0097ff;\n  color: white;\n  border: none;\n  padding: 8px 15px;\n  border-radius: 20px;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n.reorder-btn:hover {\n  background-color: #0084e0;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}