{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted, computed, watch } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { orderApi } from '../utils/api';\nimport { businessApi } from '../utils/api'; // Added import for businessApi\nimport { ElMessage } from 'element-plus'; // Added ElMessage import\n\nconst baseURL = 'http://localhost:8090'; // APIç½‘å…³åœ°å€\n\nexport default {\n  __name: 'historyComponent',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const orders = ref([]);\n    const activeTab = ref('all');\n    const searchQuery = ref(''); // æœç´¢æŸ¥è¯¢\n    const searchResults = ref([]); // æœç´¢ç»“æœ\n\n    onMounted(() => {\n      fetchOrders();\n    });\n    const goBack = () => {\n      router.push('/Index-Component');\n    };\n    const setActiveTab = tab => {\n      activeTab.value = tab;\n      // åˆ‡æ¢æ ‡ç­¾æ—¶æ»šåŠ¨åˆ°é¡¶éƒ¨\n      window.scrollTo(0, 0);\n    };\n\n    // æ¸…é™¤æœç´¢\n    const clearSearch = () => {\n      searchQuery.value = '';\n      searchResults.value = [];\n    };\n\n    // å¤„ç†æœç´¢\n    const handleSearch = () => {\n      const query = searchQuery.value.trim().toLowerCase();\n      if (!query) {\n        searchResults.value = [];\n        return;\n      }\n\n      // åœ¨è®¢å•ä¸­æœç´¢\n      searchResults.value = orders.value.filter(order => {\n        // æœç´¢å•†å®¶åç§°\n        if (order.businessName && order.businessName.toLowerCase().includes(query)) {\n          return true;\n        }\n\n        // æœç´¢é£Ÿå“åç§°\n        if (order.foodNames) {\n          const foodNames = getArrayFromString(order.foodNames);\n          if (foodNames.some(name => name.toLowerCase().includes(query))) {\n            return true;\n          }\n        }\n\n        // æœç´¢è®¢å•æ—¥æœŸ\n        if (order.orderDate && order.orderDate.includes(query)) {\n          return true;\n        }\n\n        // æœç´¢è®¢å•é‡‘é¢\n        if (order.orderTotal && order.orderTotal.toString().includes(query)) {\n          return true;\n        }\n\n        // æœç´¢è®¢å•çŠ¶æ€\n        const orderStateMap = {\n          'å¾…ä»˜æ¬¾': 1,\n          'å¾…æ¥å•': 2,\n          'é…é€ä¸­': 3,\n          'å·²å®Œæˆ': 5,\n          'å¾…è¯„ä»·': 5,\n          'å·²é€€æ¬¾': 6\n        };\n        if (Object.keys(orderStateMap).some(key => key.includes(query) && orderStateMap[key] === order.orderState)) {\n          return true;\n        }\n        return false;\n      });\n    };\n\n    // ç›‘å¬æœç´¢æŸ¥è¯¢å˜åŒ–\n    watch(searchQuery, newVal => {\n      if (!newVal.trim()) {\n        searchResults.value = [];\n      } else {\n        handleSearch();\n      }\n    });\n\n    // å°†é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°ç»„\n    const getArrayFromString = str => {\n      if (!str) return [];\n      try {\n        // æ£€æŸ¥æ˜¯å¦æ˜¯Base64å­—ç¬¦ä¸²é›†åˆ\n        if (typeof str === 'string' && str.includes('data:image')) {\n          // å°è¯•æ‰¾åˆ°æ‰€æœ‰çš„Base64å›¾ç‰‡\n          const matches = str.match(/data:image\\/[^;]+;base64,[A-Za-z0-9+/=]+/g);\n          if (matches && matches.length > 0) {\n            console.log(`æ‰¾åˆ° ${matches.length} ä¸ªå®Œæ•´çš„Base64å›¾ç‰‡`);\n            return matches;\n          }\n        }\n\n        // æ£€æŸ¥æ˜¯å¦åŒ…å«å¤šä¸ªiVBORå¼€å¤´çš„Base64å›¾ç‰‡\n        if (typeof str === 'string' && str.includes('iVBOR')) {\n          // å°è¯•åˆ†å‰²å¤šä¸ªBase64å­—ç¬¦ä¸²\n          const parts = [];\n          let currentIndex = 0;\n          while (currentIndex < str.length) {\n            const iVBORIndex = str.indexOf('iVBOR', currentIndex);\n            if (iVBORIndex === -1) break;\n\n            // æ‰¾åˆ°ä¸‹ä¸€ä¸ªiVBORæˆ–å­—ç¬¦ä¸²ç»“æŸ\n            let nextIndex = str.indexOf('iVBOR', iVBORIndex + 5);\n            if (nextIndex === -1) nextIndex = str.length;\n\n            // æå–è¿™æ®µBase64æ•°æ®\n            const base64Part = str.substring(iVBORIndex, nextIndex).trim();\n            if (base64Part.length > 100) {\n              // ç¡®ä¿æ˜¯æœ‰æ•ˆçš„Base64æ•°æ®\n              parts.push(base64Part);\n            }\n            currentIndex = nextIndex;\n          }\n          if (parts.length > 0) {\n            console.log(`æ‰¾åˆ° ${parts.length} ä¸ªiVBORå¼€å¤´çš„Base64å›¾ç‰‡`);\n            return parts;\n          }\n        }\n\n        // å¦‚æœä¸æ˜¯ç‰¹æ®Šçš„Base64é›†åˆï¼Œåˆ™æŒ‰ç…§å¸¸è§„æ–¹å¼å¤„ç†\n        // é¦–å…ˆæ£€æŸ¥æ˜¯å¦æ˜¯å•ä¸ªBase64å­—ç¬¦ä¸²\n        if (typeof str === 'string' && str.length > 100 && (str.startsWith('data:image') || str.startsWith('iVBOR') || /^[A-Za-z0-9+/=]+$/.test(str.substring(0, 20)))) {\n          return [str];\n        }\n\n        // å°è¯•æŒ‰é€—å·åˆ†å‰²ï¼Œä½†éœ€è¦æ³¨æ„ä¸è¦åˆ†å‰²Base64å­—ç¬¦ä¸²ä¸­çš„é€—å·\n        const items = [];\n        const commaPositions = [];\n\n        // æ‰¾å‡ºæ‰€æœ‰å¯èƒ½çš„é€—å·ä½ç½®\n        for (let i = 0; i < str.length; i++) {\n          if (str[i] === ',') {\n            commaPositions.push(i);\n          }\n        }\n\n        // æ£€æŸ¥æ¯ä¸ªé€—å·æ˜¯å¦åœ¨Base64å­—ç¬¦ä¸²å†…éƒ¨\n        let startPos = 0;\n        for (const pos of commaPositions) {\n          // æ£€æŸ¥é€—å·å‰åçš„å­—ç¬¦ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯Base64å†…éƒ¨çš„é€—å·\n          const beforeComma = str.substring(Math.max(0, pos - 20), pos);\n          const afterComma = str.substring(pos + 1, Math.min(str.length, pos + 21));\n\n          // å¦‚æœé€—å·å‰åéƒ½æ˜¯Base64å­—ç¬¦ï¼Œåˆ™å¯èƒ½æ˜¯Base64å†…éƒ¨çš„é€—å·\n          const isBase64Comma = /^[A-Za-z0-9+/=]+$/.test(beforeComma) && /^[A-Za-z0-9+/=]+$/.test(afterComma);\n          if (!isBase64Comma) {\n            // è¿™æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„åˆ†éš”é€—å·\n            const item = str.substring(startPos, pos).trim();\n            if (item) items.push(item);\n            startPos = pos + 1;\n          }\n        }\n\n        // æ·»åŠ æœ€åä¸€é¡¹\n        const lastItem = str.substring(startPos).trim();\n        if (lastItem) items.push(lastItem);\n\n        // å¦‚æœæ²¡æœ‰æˆåŠŸåˆ†å‰²ï¼Œå›é€€åˆ°ç®€å•çš„é€—å·åˆ†å‰²\n        if (items.length === 0) {\n          return str.split(',').map(item => item.trim());\n        }\n        return items;\n      } catch (error) {\n        console.error('åˆ†å‰²å­—ç¬¦ä¸²å‡ºé”™:', error);\n        // å‡ºé”™æ—¶å°è¯•ç®€å•çš„é€—å·åˆ†å‰²\n        try {\n          return str.split(',').map(item => item.trim());\n        } catch {\n          return [str]; // æœ€åçš„å›é€€æ–¹æ¡ˆ\n        }\n      }\n    };\n\n    // å¤„ç†å›¾ç‰‡URL\n    const getImageUrl = imgPath => {\n      if (!imgPath) {\n        return require('@/assets/img/BUSINESS/img.png');\n      }\n      try {\n        // å¦‚æœæ˜¯Base64ç¼–ç çš„å›¾ç‰‡æ•°æ®\n        if (typeof imgPath === 'string' && imgPath.length > 100) {\n          return sanitizeBase64(imgPath);\n        }\n\n        // å¦‚æœæ˜¯å®Œæ•´URLï¼Œç›´æ¥è¿”å›\n        if (imgPath.startsWith('http')) {\n          return imgPath;\n        }\n\n        // å¦‚æœæ˜¯ä»¥/assetså¼€å¤´çš„è·¯å¾„ï¼Œè½¬æ¢ä¸ºæ­£ç¡®çš„è·¯å¾„\n        if (imgPath.startsWith('/assets/')) {\n          // å»æ‰å¼€å¤´çš„/assets/ï¼Œå› ä¸ºåœ¨é¡¹ç›®ä¸­assetsæ˜¯ç›¸å¯¹è·¯å¾„\n          const relativePath = imgPath.replace('/assets/', '');\n          try {\n            return require(`@/assets/${relativePath}`);\n          } catch (e) {\n            // å°è¯•é€šè¿‡APIç½‘å…³è·å–\n            return baseURL + imgPath;\n          }\n        }\n\n        // å¦‚æœæ˜¯ç›¸å¯¹è·¯å¾„ï¼Œæ·»åŠ baseURL\n        if (imgPath.startsWith('/')) {\n          return baseURL + imgPath;\n        }\n\n        // å°è¯•åŠ è½½é¡¹ç›®ä¸­çš„å›¾ç‰‡\n        try {\n          // é¦–å…ˆå°è¯•ä»BUSINESSç›®å½•åŠ è½½\n          if (!imgPath.includes('/')) {\n            try {\n              return require('@/assets/img/BUSINESS/' + imgPath);\n            } catch (e) {\n              // å°è¯•ä»å…¶ä»–ç›®å½•åŠ è½½\n            }\n          }\n\n          // ç„¶åå°è¯•ä»æ™®é€šimgç›®å½•åŠ è½½\n          return require('@/assets/img/' + imgPath);\n        } catch (e) {\n          return require('@/assets/img/BUSINESS/img.png');\n        }\n      } catch (error) {\n        console.error('å¤„ç†å›¾ç‰‡URLå‡ºé”™:', error);\n        return require('@/assets/img/BUSINESS/img.png');\n      }\n    };\n\n    // å¤„ç†å’ŒéªŒè¯Base64ç¼–ç çš„å›¾ç‰‡\n    const sanitizeBase64 = base64String => {\n      try {\n        // å·²ç»æ˜¯å®Œæ•´çš„Base64å­—ç¬¦ä¸²\n        if (base64String.startsWith('data:image/')) {\n          return base64String;\n        }\n\n        // æ£€æŸ¥æ˜¯å¦æ˜¯PNGçš„Base64ç¼–ç \n        if (base64String.startsWith('iVBOR')) {\n          return `data:image/png;base64,${base64String}`;\n        }\n\n        // æ£€æŸ¥æ˜¯å¦æ˜¯JPEGçš„Base64ç¼–ç \n        if (base64String.startsWith('/9j/')) {\n          return `data:image/jpeg;base64,${base64String}`;\n        }\n\n        // æ£€æŸ¥æ˜¯å¦åŒ…å«æ— æ•ˆå­—ç¬¦\n        if (!/^[A-Za-z0-9+/=]+$/.test(base64String.replace(/\\s/g, ''))) {\n          console.warn('Base64å­—ç¬¦ä¸²åŒ…å«æ— æ•ˆå­—ç¬¦');\n          return '';\n        }\n\n        // æ£€æŸ¥é•¿åº¦æ˜¯å¦åˆç†ï¼ˆBase64ç¼–ç çš„å›¾ç‰‡é€šå¸¸å¾ˆé•¿ï¼‰\n        if (base64String.length < 100) {\n          console.warn('Base64å­—ç¬¦ä¸²é•¿åº¦ä¸è¶³');\n          return '';\n        }\n\n        // é»˜è®¤ä½œä¸ºPNGå¤„ç†\n        return `data:image/png;base64,${base64String.replace(/\\s/g, '')}`;\n      } catch (error) {\n        console.error('å¤„ç†Base64å­—ç¬¦ä¸²å‡ºé”™:', error);\n        return '';\n      }\n    };\n\n    // å¤„ç†å›¾ç‰‡åŠ è½½é”™è¯¯\n    const handleImageError = (e, type) => {\n      console.error(`å›¾ç‰‡åŠ è½½å¤±è´¥: ${e.target.src.substring(0, 50)}...`);\n      try {\n        // æ£€æŸ¥æ˜¯å¦æ˜¯Base64ç¼–ç çš„å›¾ç‰‡åŠ è½½å¤±è´¥\n        const src = e.target.src;\n        if (src && src.startsWith('data:image')) {\n          console.log('å°è¯•ä¿®å¤Base64å›¾ç‰‡...');\n\n          // æå–Base64éƒ¨åˆ†\n          const base64Data = src.split(',')[1];\n          if (base64Data) {\n            // å°è¯•ä½¿ç”¨ä¸åŒçš„MIMEç±»å‹\n            if (src.includes('image/png')) {\n              e.target.src = `data:image/jpeg;base64,${base64Data}`;\n              return;\n            } else if (src.includes('image/jpeg')) {\n              e.target.src = `data:image/png;base64,${base64Data}`;\n              return;\n            }\n          }\n        }\n      } catch (error) {\n        console.error('å¤„ç†å›¾ç‰‡é”™è¯¯æ—¶å‡ºé”™:', error);\n      }\n\n      // ä½¿ç”¨é»˜è®¤å›¾ç‰‡\n      if (type === 'business') {\n        e.target.src = require('@/assets/img/BUSINESS/img.png');\n      } else {\n        e.target.src = require('@/assets/img/sp01.png');\n      }\n    };\n\n    // å†æ¬¡ä¸‹å•\n    const reorder = order => {\n      // å®ç°å†æ¬¡ä¸‹å•åŠŸèƒ½\n      router.push(`/business-component/${order.businessId}`);\n    };\n\n    // å‰å¾€è¯„ä»·é¡µé¢\n    const goToRating = order => {\n      console.log('Order object:', order);\n\n      // ç¡®ä¿businessIdå­˜åœ¨ä¸”ä¸ºæœ‰æ•ˆå€¼\n      const businessId = order.businessId || order.business?.businessId || '1';\n\n      // å¦‚æœå•†å®¶å›¾ç‰‡ä¸ºç©ºï¼Œå°è¯•å†æ¬¡è·å–\n      if (!order.businessImg && businessId) {\n        businessApi.getBusinessById(businessId).then(businessInfo => {\n          if (businessInfo && businessInfo.businessImg) {\n            navigateToRating(order, businessInfo.businessImg);\n          } else {\n            navigateToRating(order);\n          }\n        }).catch(error => {\n          console.error('è·å–å•†å®¶ä¿¡æ¯å¤±è´¥:', error);\n          navigateToRating(order);\n        });\n      } else {\n        navigateToRating(order);\n      }\n    };\n\n    // å¯¼èˆªåˆ°è¯„ä»·é¡µé¢\n    const navigateToRating = (order, businessImg = null) => {\n      router.push({\n        name: 'Rating',\n        params: {\n          orderId: order.orderId || '1',\n          businessId: order.businessId || order.business?.businessId || '1',\n          businessName: order.businessName || 'æœªçŸ¥å•†å®¶'\n        },\n        query: {\n          businessImg: businessImg || order.businessImg || '',\n          orderDate: order.orderDate || ''\n        }\n      });\n    };\n\n    // æ£€æŸ¥è®¢å•æ˜¯å¦å·²è¯„ä»·\n    const isOrderRated = orderId => {\n      try {\n        // æ£€æŸ¥æœ¬åœ°å­˜å‚¨ä¸­æ˜¯å¦æœ‰è¯¥è®¢å•çš„è¯„ä»·\n        const ratingsString = localStorage.getItem('localRatings');\n        console.log(`æ£€æŸ¥è®¢å• ${orderId} æ˜¯å¦å·²è¯„ä»·, æœ¬åœ°å­˜å‚¨:`, ratingsString);\n        if (ratingsString) {\n          const ratings = JSON.parse(ratingsString);\n          console.log('è§£æåçš„æœ¬åœ°è¯„ä»·:', ratings);\n\n          // ç¡®ä¿ä½¿ç”¨æ•°å­—ç±»å‹è¿›è¡Œæ¯”è¾ƒ\n          const isRated = ratings.some(r => r.orderId === Number(orderId));\n          console.log(`è®¢å• ${orderId} å·²è¯„ä»·çŠ¶æ€:`, isRated);\n          return isRated;\n        }\n      } catch (error) {\n        console.error('æ£€æŸ¥è®¢å•è¯„ä»·çŠ¶æ€å¤±è´¥:', error);\n      }\n      return false;\n    };\n    const fetchOrders = async () => {\n      try {\n        const response = await orderApi.getOrderHistory();\n        console.log('è®¢å•å†å²åŸå§‹å“åº”:', response);\n        if (response && Array.isArray(response)) {\n          orders.value = response;\n        } else if (response && response.data && Array.isArray(response.data)) {\n          orders.value = response.data;\n        } else if (response && typeof response === 'object') {\n          // å°è¯•ä»å“åº”ä¸­æå–æ•°æ®\n          console.log('å°è¯•ä»å“åº”ä¸­æå–è®¢å•æ•°æ®:', response);\n          const possibleOrderArrays = [response.data, response.result, response.content, response.records, response.list, response.orders];\n          for (const arr of possibleOrderArrays) {\n            if (arr && Array.isArray(arr)) {\n              console.log('æ‰¾åˆ°è®¢å•æ•°ç»„:', arr);\n              orders.value = arr;\n              break;\n            }\n          }\n        }\n\n        // è¯¦ç»†è®°å½•æ¯ä¸ªè®¢å•çš„å›¾ç‰‡ä¿¡æ¯\n        console.log('è®¢å•æ•°æ®å¤„ç†å‰:', JSON.stringify(orders.value.map(order => ({\n          orderId: order.orderId,\n          businessImg: order.businessImg ? order.businessImg.substring(0, 30) + '...' : 'null',\n          businessImgType: order.businessImg ? typeof order.businessImg : 'null',\n          hasBusinessImg: !!order.businessImg,\n          foodImgs: order.foodImgs ? order.foodImgs.substring(0, 30) + '...' : 'null',\n          foodImgsLength: order.foodImgs ? order.foodImgs.length : 0,\n          foodNames: order.foodNames,\n          foodNamesLength: order.foodNames ? order.foodNames.split(',').length : 0\n        }))));\n\n        // ç¡®ä¿æ¯ä¸ªè®¢å•å¯¹è±¡éƒ½æœ‰å¿…è¦çš„å±æ€§\n        orders.value = orders.value.map(order => {\n          // ä½¿ç”¨æ•°æ®åº“ä¸­å­˜å‚¨çš„å•†å®¶åç§°å’Œå›¾ç‰‡\n          const businessName = order.businessName || order.business?.businessName || 'æœªçŸ¥å•†å®¶';\n          const businessImg = order.businessImg || order.business?.businessImg || '';\n\n          // å¤„ç†é£Ÿå“å›¾ç‰‡æ•°æ®\n          let foodImgs = order.foodImgs || '';\n          const foodNames = order.foodNames || '';\n\n          // æ£€æŸ¥é£Ÿå“åç§°å’Œå›¾ç‰‡æ•°é‡æ˜¯å¦åŒ¹é…\n          const foodNamesArray = foodNames.split(',').filter(name => name.trim());\n          let foodImgsArray = getArrayFromString(foodImgs);\n          console.log(`è®¢å• ${order.orderId} çš„é£Ÿå“åç§°æ•°é‡: ${foodNamesArray.length}, é£Ÿå“å›¾ç‰‡æ•°é‡: ${foodImgsArray.length}`);\n\n          // å¦‚æœé£Ÿå“å›¾ç‰‡æ•°é‡å°‘äºé£Ÿå“åç§°æ•°é‡ï¼Œæ·»åŠ é»˜è®¤å›¾ç‰‡\n          if (foodImgsArray.length < foodNamesArray.length) {\n            console.log(`è®¢å• ${order.orderId} çš„é£Ÿå“å›¾ç‰‡æ•°é‡ä¸è¶³ï¼Œæ·»åŠ é»˜è®¤å›¾ç‰‡`);\n            const defaultImg = '/assets/img/sp01.png';\n            while (foodImgsArray.length < foodNamesArray.length) {\n              foodImgsArray.push(defaultImg);\n            }\n            // é‡æ–°ç”ŸæˆfoodImgså­—ç¬¦ä¸²\n            foodImgs = foodImgsArray.join(',');\n          }\n\n          // å¦‚æœæœ‰è®¢å•è¯¦æƒ…ï¼Œå°è¯•ä»ä¸­æå–æ›´å¤šå›¾ç‰‡ä¿¡æ¯\n          if (order.orderDetailList && Array.isArray(order.orderDetailList)) {\n            const detailImages = order.orderDetailList.map(detail => detail.foodImg || '');\n            console.log(`è®¢å• ${order.orderId} çš„è¯¦æƒ…å›¾ç‰‡:`, detailImages);\n\n            // å¦‚æœè¯¦æƒ…ä¸­çš„å›¾ç‰‡æ¯”foodImgsæ›´å¤šï¼Œä½¿ç”¨è¯¦æƒ…ä¸­çš„å›¾ç‰‡\n            if (detailImages.filter(img => img).length > foodImgsArray.filter(img => img).length) {\n              foodImgs = detailImages.join(',');\n              console.log(`ä½¿ç”¨è®¢å•è¯¦æƒ…ä¸­çš„å›¾ç‰‡:`, foodImgs.substring(0, 50) + '...');\n            }\n          }\n          return {\n            ...order,\n            businessId: order.businessId || order.business?.businessId || '1',\n            businessName: businessName,\n            businessImg: businessImg,\n            foodImgs: foodImgs,\n            // æ›´æ–°åçš„é£Ÿå“å›¾ç‰‡\n            orderDate: order.orderDate || new Date(order.orderTime || Date.now()).toLocaleString()\n          };\n        });\n        console.log('å¤„ç†åçš„è®¢å•æ•°æ®:', orders.value.map(order => ({\n          orderId: order.orderId,\n          foodImgsLength: order.foodImgs ? order.foodImgs.length : 0,\n          foodNamesLength: order.foodNames ? order.foodNames.split(',').length : 0\n        })));\n      } catch (error) {\n        console.error('è·å–è®¢å•å†å²å¤±è´¥:', error);\n\n        // å¦‚æœAPIè°ƒç”¨å¤±è´¥ï¼Œå°è¯•ä»æœ¬åœ°å­˜å‚¨è·å–è®¢å•ä¿¡æ¯\n        const localOrderInfo = localStorage.getItem('orderInfo');\n        if (localOrderInfo) {\n          try {\n            const orderInfo = JSON.parse(localOrderInfo);\n            console.log('ä½¿ç”¨æœ¬åœ°å­˜å‚¨çš„è®¢å•ä¿¡æ¯:', orderInfo);\n\n            // åˆ›å»ºæ¨¡æ‹Ÿè®¢å•æ•°æ®\n            const mockOrder = {\n              orderId: new Date().getTime(),\n              businessId: orderInfo.businessId,\n              businessName: orderInfo.businessName,\n              businessImg: orderInfo.businessImg,\n              orderDate: orderInfo.orderDate || new Date().toLocaleString(),\n              orderTotal: orderInfo.orderTotal || 0,\n              orderState: 5,\n              // å·²å®Œæˆ/å¾…è¯„ä»·\n              foodNames: orderInfo.items?.map(item => item.foodName).join(','),\n              foodImgs: orderInfo.items?.map(item => item.foodImg || '/assets/img/sp01.png').join(','),\n              quantities: orderInfo.items?.map(item => item.quantity).join(',')\n            };\n\n            // ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®\n            orders.value = [mockOrder];\n\n            // æ˜¾ç¤ºæç¤º\n            ElMessage({\n              message: 'APIæœåŠ¡ä¸å¯ç”¨ï¼Œæ˜¾ç¤ºæœ¬åœ°å­˜å‚¨çš„è®¢å•ä¿¡æ¯',\n              type: 'warning',\n              duration: 3000\n            });\n          } catch (e) {\n            console.error('è§£ææœ¬åœ°è®¢å•ä¿¡æ¯å¤±è´¥:', e);\n\n            // ä½¿ç”¨ç¡¬ç¼–ç çš„æ¨¡æ‹Ÿæ•°æ®\n            useMockData();\n          }\n        } else {\n          // å¦‚æœæœ¬åœ°å­˜å‚¨ä¸­æ²¡æœ‰è®¢å•ä¿¡æ¯ï¼Œä½¿ç”¨ç¡¬ç¼–ç çš„æ¨¡æ‹Ÿæ•°æ®\n          useMockData();\n        }\n      }\n    };\n\n    // ä½¿ç”¨ç¡¬ç¼–ç çš„æ¨¡æ‹Ÿæ•°æ®\n    const useMockData = () => {\n      console.log('ä½¿ç”¨ç¡¬ç¼–ç çš„æ¨¡æ‹Ÿè®¢å•æ•°æ®');\n\n      // åˆ›å»ºæ¨¡æ‹Ÿè®¢å•æ•°æ®\n      const mockOrders = [{\n        orderId: 1,\n        businessId: 1,\n        businessName: 'ä¸‡å®¶é¥ºå­ï¼ˆè½¯ä»¶å›­E18åº—ï¼‰',\n        businessImg: '/assets/img/BUSINESS/img.png',\n        orderDate: new Date().toLocaleString(),\n        orderTotal: 31,\n        orderState: 5,\n        foodNames: 'çº¯è‚‰é²œè‚‰,ç‰ç±³é²œè‚‰',\n        foodImgs: '/assets/img/sp01.png,/assets/img/sp01.png',\n        quantities: '1,1'\n      }, {\n        orderId: 2,\n        businessId: 2,\n        businessName: 'è‚¯å¾·åŸºéº¦å½“åŠ³',\n        businessImg: '/assets/img/BUSINESS/img.png',\n        orderDate: new Date(Date.now() - 86400000).toLocaleString(),\n        // æ˜¨å¤©\n        orderTotal: 45,\n        orderState: 5,\n        foodNames: 'æ±‰å ¡,è–¯æ¡,å¯ä¹',\n        foodImgs: '/assets/img/sp01.png,/assets/img/sp01.png,/assets/img/sp01.png',\n        quantities: '1,1,1'\n      }];\n\n      // ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®\n      orders.value = mockOrders;\n\n      // æ˜¾ç¤ºæç¤º\n      ElMessage({\n        message: 'APIæœåŠ¡ä¸å¯ç”¨ï¼Œæ˜¾ç¤ºæ¨¡æ‹Ÿè®¢å•æ•°æ®',\n        type: 'warning',\n        duration: 3000\n      });\n    };\n\n    // æ ¹æ®é€‰ä¸­çš„æ ‡ç­¾å’Œæœç´¢ç»“æœç­›é€‰è®¢å•\n    const filteredOrders = computed(() => {\n      // å¦‚æœæœ‰æœç´¢ç»“æœï¼Œä¼˜å…ˆæ˜¾ç¤ºæœç´¢ç»“æœ\n      if (searchQuery.value.trim() && searchResults.value.length > 0) {\n        // è¿›ä¸€æ­¥æ ¹æ®æ ‡ç­¾ç­›é€‰æœç´¢ç»“æœ\n        if (activeTab.value === 'all') {\n          return searchResults.value;\n        } else if (activeTab.value === 'inProgress') {\n          // è®¢å•çŠ¶æ€ï¼š1-å·²ä¸‹å•/å¾…ä»˜æ¬¾ï¼Œ2-å·²ä»˜æ¬¾/å¾…æ¥å•ï¼Œ3-å·²æ¥å•/é…é€ä¸­\n          return searchResults.value.filter(order => [1, 2, 3].includes(order.orderState));\n        } else if (activeTab.value === 'toRate') {\n          // æœªè¯„ä»·çš„è®¢å•\n          return searchResults.value.filter(order => order.orderState === 5 && !isOrderRated(order.orderId));\n        } else if (activeTab.value === 'rated') {\n          // å·²è¯„ä»·çš„è®¢å•\n          return searchResults.value.filter(order => isOrderRated(order.orderId));\n        }\n        return searchResults.value;\n      }\n\n      // å¦‚æœæ²¡æœ‰æœç´¢æˆ–æœç´¢ç»“æœä¸ºç©ºï¼Œä½¿ç”¨åŸå§‹ç­›é€‰é€»è¾‘\n      if (activeTab.value === 'all') {\n        return orders.value;\n      } else if (activeTab.value === 'inProgress') {\n        // è®¢å•çŠ¶æ€ï¼š1-å·²ä¸‹å•/å¾…ä»˜æ¬¾ï¼Œ2-å·²ä»˜æ¬¾/å¾…æ¥å•ï¼Œ3-å·²æ¥å•/é…é€ä¸­\n        return orders.value.filter(order => [1, 2, 3].includes(order.orderState));\n      } else if (activeTab.value === 'toRate') {\n        // æœªè¯„ä»·çš„è®¢å•\n        return orders.value.filter(order => order.orderState === 5 && !isOrderRated(order.orderId));\n      } else if (activeTab.value === 'rated') {\n        // å·²è¯„ä»·çš„è®¢å•\n        return orders.value.filter(order => isOrderRated(order.orderId));\n      }\n      return orders.value;\n    });\n\n    // è·å–é£Ÿå“å›¾ç‰‡çš„è¾…åŠ©å‡½æ•°\n    const getFoodImage = (order, index) => {\n      try {\n        // è·å–é£Ÿå“å›¾ç‰‡æ•°ç»„\n        const foodImgs = getArrayFromString(order.foodImgs);\n        console.log(`è·å–è®¢å• ${order.orderId} çš„ç¬¬ ${index} ä¸ªé£Ÿå“å›¾ç‰‡, å›¾ç‰‡æ•°ç»„é•¿åº¦: ${foodImgs.length}`);\n\n        // æ£€æŸ¥ç´¢å¼•æ˜¯å¦æœ‰æ•ˆ\n        if (index >= 0 && index < foodImgs.length) {\n          const imgPath = foodImgs[index];\n          console.log(`é£Ÿå“å›¾ç‰‡è·¯å¾„: ${imgPath ? imgPath.length > 50 ? imgPath.substring(0, 50) + '...' : imgPath : 'null'}`);\n\n          // æ£€æŸ¥æ˜¯å¦æ˜¯Base64ç¼–ç \n          if (imgPath && imgPath.length > 100) {\n            return sanitizeBase64(imgPath);\n          }\n\n          // æ£€æŸ¥æ˜¯å¦æ˜¯ç©ºå­—ç¬¦ä¸²æˆ–æ— æ•ˆè·¯å¾„\n          if (!imgPath || imgPath === 'null' || imgPath === 'undefined') {\n            console.log('å›¾ç‰‡è·¯å¾„æ— æ•ˆï¼Œè¿”å›é»˜è®¤å›¾ç‰‡');\n            return require('@/assets/img/sp01.png');\n          }\n\n          // å¤„ç†æ™®é€šå›¾ç‰‡URL\n          console.log('ä½¿ç”¨getImageUrlå¤„ç†æ™®é€šå›¾ç‰‡URL');\n          return getImageUrl(imgPath);\n        }\n\n        // å¦‚æœç´¢å¼•æ— æ•ˆï¼Œè¿”å›é»˜è®¤å›¾ç‰‡\n        console.log('ç´¢å¼•æ— æ•ˆï¼Œè¿”å›é»˜è®¤å›¾ç‰‡');\n        return require('@/assets/img/sp01.png');\n      } catch (error) {\n        console.error('è·å–é£Ÿå“å›¾ç‰‡å‡ºé”™:', error, error.stack);\n        return require('@/assets/img/sp01.png');\n      }\n    };\n\n    // è·å–é£Ÿå“æ•°é‡çš„è¾…åŠ©å‡½æ•°\n    const getFoodQuantity = (order, index) => {\n      try {\n        // è·å–æ•°é‡æ•°ç»„\n        const quantities = getArrayFromString(order.quantities);\n\n        // æ£€æŸ¥ç´¢å¼•æ˜¯å¦æœ‰æ•ˆ\n        if (index >= 0 && index < quantities.length) {\n          return quantities[index] || '1';\n        }\n\n        // å¦‚æœç´¢å¼•æ— æ•ˆï¼Œè¿”å›é»˜è®¤å€¼\n        return '1';\n      } catch (error) {\n        console.error('è·å–é£Ÿå“æ•°é‡å‡ºé”™:', error);\n        return '1';\n      }\n    };\n    const __returned__ = {\n      router,\n      orders,\n      activeTab,\n      baseURL,\n      searchQuery,\n      searchResults,\n      goBack,\n      setActiveTab,\n      clearSearch,\n      handleSearch,\n      getArrayFromString,\n      getImageUrl,\n      sanitizeBase64,\n      handleImageError,\n      reorder,\n      goToRating,\n      navigateToRating,\n      isOrderRated,\n      fetchOrders,\n      useMockData,\n      filteredOrders,\n      getFoodImage,\n      getFoodQuantity,\n      ref,\n      onMounted,\n      computed,\n      watch,\n      get useRouter() {\n        return useRouter;\n      },\n      get orderApi() {\n        return orderApi;\n      },\n      get businessApi() {\n        return businessApi;\n      },\n      get ElMessage() {\n        return ElMessage;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","watch","useRouter","orderApi","businessApi","ElMessage","baseURL","router","orders","activeTab","searchQuery","searchResults","fetchOrders","goBack","push","setActiveTab","tab","value","window","scrollTo","clearSearch","handleSearch","query","trim","toLowerCase","filter","order","businessName","includes","foodNames","getArrayFromString","some","name","orderDate","orderTotal","toString","orderStateMap","Object","keys","key","orderState","newVal","str","matches","match","length","console","log","parts","currentIndex","iVBORIndex","indexOf","nextIndex","base64Part","substring","startsWith","test","items","commaPositions","i","startPos","pos","beforeComma","Math","max","afterComma","min","isBase64Comma","item","lastItem","split","map","error","getImageUrl","imgPath","require","sanitizeBase64","relativePath","replace","e","base64String","warn","handleImageError","type","target","src","base64Data","reorder","businessId","goToRating","business","businessImg","getBusinessById","then","businessInfo","navigateToRating","catch","params","orderId","isOrderRated","ratingsString","localStorage","getItem","ratings","JSON","parse","isRated","r","Number","response","getOrderHistory","Array","isArray","data","possibleOrderArrays","result","content","records","list","arr","stringify","businessImgType","hasBusinessImg","foodImgs","foodImgsLength","foodNamesLength","foodNamesArray","foodImgsArray","defaultImg","join","orderDetailList","detailImages","detail","foodImg","img","Date","orderTime","now","toLocaleString","localOrderInfo","orderInfo","mockOrder","getTime","foodName","quantities","quantity","message","duration","useMockData","mockOrders","filteredOrders","getFoodImage","index","stack","getFoodQuantity"],"sources":["D:/back_elm/vue_elm/src/components/historyComponent.vue"],"sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <div class=\"header\">\n      <div class=\"search\">\n        <div class=\"search-bottom\">\n          <div class=\"back\">\n            <span class=\"iconfont icon-back\" @click=\"goBack\"></span>\n          </div>\n          <div class=\"search-pt\">\n            <span class=\"iconfont icon-sousuo\" style=\"margin-left: 2vw\"></span>\n            <input \n              style=\"flex:6;\" \n              type=\"text\" \n              placeholder=\"å†å²ä¿¡æ¯æœç´¢\" \n              v-model=\"searchQuery\"\n              @input=\"handleSearch\"\n            />\n            <span \n              v-if=\"searchQuery\" \n              class=\"clear-search\" \n              @click=\"clearSearch\"\n            >\n              Ã—\n            </span>\n          </div>\n          <div class=\"box\">\n            <span class=\"iconfont icon-gongjuxiang\"></span>\n            <span class=\"iconfont icon-24gf-ellipsis\"></span>\n          </div>\n        </div>\n        <div class=\"information\">\n          <p :class=\"{ active: activeTab === 'all' }\" @click=\"setActiveTab('all')\">å…¨éƒ¨</p>\n          <p :class=\"{ active: activeTab === 'inProgress' }\" @click=\"setActiveTab('inProgress')\">è¿›è¡Œä¸­</p>\n          <p :class=\"{ active: activeTab === 'toRate' }\" @click=\"setActiveTab('toRate')\">å¾…è¯„ä»·</p>\n          <p :class=\"{ active: activeTab === 'rated' }\" @click=\"setActiveTab('rated')\">å·²è¯„ä»·</p>\n        </div>\n      </div>\n    </div>\n    <div class=\"body\">\n      <div v-if=\"filteredOrders.length === 0\" class=\"no-results\">\n        <div class=\"no-results-icon\">ğŸ”</div>\n        <div class=\"no-results-text\">æ²¡æœ‰æ‰¾åˆ°ç›¸å…³è®¢å•</div>\n      </div>\n      <div v-for=\"order in filteredOrders\" :key=\"order.orderId\" class=\"order-card\">\n        <!-- è®¢å•å¤´éƒ¨ï¼šå•†å®¶ä¿¡æ¯å’Œè®¢å•æ€»ä»· -->\n        <div class=\"order-header\">\n          <div class=\"business-info\">\n            <img :src=\"getImageUrl(order.businessImg)\" @error=\"handleImageError($event, 'business')\" class=\"business-img\"/>\n            <div class=\"business-details\">\n              <div class=\"business-name\">{{ order.businessName }}</div>\n              <div class=\"delivery-price\">{{ order.deliveryPrice }}å…ƒæ— é—¨æ§›</div>\n            </div>\n          </div>\n          <div class=\"order-price\">&#165;{{ order.orderTotal }}</div>\n        </div>\n        \n        <!-- è®¢å•å†…å®¹ï¼šé£Ÿå“åˆ—è¡¨ -->\n        <div class=\"order-content\">\n          <div class=\"food-list\">\n            <div v-for=\"(foodName, index) in getArrayFromString(order.foodNames)\" :key=\"index\" class=\"food-item\">\n              <div class=\"food-left\">\n                <img \n                  :src=\"getFoodImage(order, index)\" \n                  @error=\"handleImageError($event, 'food')\" \n                  class=\"food-img\"\n                  alt=\"é£Ÿå“å›¾ç‰‡\"\n                  loading=\"lazy\"\n                />\n              </div>\n              <div class=\"food-right\">\n                <div class=\"food-name\">{{ foodName || 'æœªçŸ¥é£Ÿå“' }}</div>\n                <div class=\"food-quantity\">x{{ getFoodQuantity(order, index) }}</div>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <!-- è®¢å•åº•éƒ¨ï¼šè®¢å•æ—¶é—´å’Œæ“ä½œæŒ‰é’® -->\n        <div class=\"order-footer\">\n          <div class=\"order-date\">{{ order.orderDate }}</div>\n          <div class=\"order-actions\">\n            <button class=\"reorder-btn\" @click=\"reorder(order)\">å†æ¥ä¸€å•</button>\n            <button \n              v-if=\"isOrderRated(order.orderId)\" \n              class=\"rated-btn\" \n              @click=\"goToRating(order)\"\n            >\n              ä¿®æ”¹è¯„ä»·\n            </button>\n            <button \n              v-else \n              class=\"rating-btn\" \n              @click=\"goToRating(order)\"\n            >\n              è¯„ä»·è®¢å•\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed, watch } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { orderApi } from '../utils/api';\nimport { businessApi } from '../utils/api'; // Added import for businessApi\nimport { ElMessage } from 'element-plus'; // Added ElMessage import\n\nconst router = useRouter();\nconst orders = ref([]);\nconst activeTab = ref('all');\nconst baseURL = 'http://localhost:8090'; // APIç½‘å…³åœ°å€\nconst searchQuery = ref(''); // æœç´¢æŸ¥è¯¢\nconst searchResults = ref([]); // æœç´¢ç»“æœ\n\nonMounted(() => {\n  fetchOrders();\n});\n\nconst goBack = () => {\n  router.push('/Index-Component');\n};\n\nconst setActiveTab = (tab) => {\n  activeTab.value = tab;\n  // åˆ‡æ¢æ ‡ç­¾æ—¶æ»šåŠ¨åˆ°é¡¶éƒ¨\n  window.scrollTo(0, 0);\n};\n\n// æ¸…é™¤æœç´¢\nconst clearSearch = () => {\n  searchQuery.value = '';\n  searchResults.value = [];\n};\n\n// å¤„ç†æœç´¢\nconst handleSearch = () => {\n  const query = searchQuery.value.trim().toLowerCase();\n  \n  if (!query) {\n    searchResults.value = [];\n    return;\n  }\n  \n  // åœ¨è®¢å•ä¸­æœç´¢\n  searchResults.value = orders.value.filter(order => {\n    // æœç´¢å•†å®¶åç§°\n    if (order.businessName && order.businessName.toLowerCase().includes(query)) {\n      return true;\n    }\n    \n    // æœç´¢é£Ÿå“åç§°\n    if (order.foodNames) {\n      const foodNames = getArrayFromString(order.foodNames);\n      if (foodNames.some(name => name.toLowerCase().includes(query))) {\n        return true;\n      }\n    }\n    \n    // æœç´¢è®¢å•æ—¥æœŸ\n    if (order.orderDate && order.orderDate.includes(query)) {\n      return true;\n    }\n    \n    // æœç´¢è®¢å•é‡‘é¢\n    if (order.orderTotal && order.orderTotal.toString().includes(query)) {\n      return true;\n    }\n    \n    // æœç´¢è®¢å•çŠ¶æ€\n    const orderStateMap = {\n      'å¾…ä»˜æ¬¾': 1,\n      'å¾…æ¥å•': 2,\n      'é…é€ä¸­': 3,\n      'å·²å®Œæˆ': 5,\n      'å¾…è¯„ä»·': 5,\n      'å·²é€€æ¬¾': 6\n    };\n    \n    if (Object.keys(orderStateMap).some(key => \n      key.includes(query) && orderStateMap[key] === order.orderState\n    )) {\n      return true;\n    }\n    \n    return false;\n  });\n};\n\n// ç›‘å¬æœç´¢æŸ¥è¯¢å˜åŒ–\nwatch(searchQuery, (newVal) => {\n  if (!newVal.trim()) {\n    searchResults.value = [];\n  } else {\n    handleSearch();\n  }\n});\n\n// å°†é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°ç»„\nconst getArrayFromString = (str) => {\n  if (!str) return [];\n  \n  try {\n    // æ£€æŸ¥æ˜¯å¦æ˜¯Base64å­—ç¬¦ä¸²é›†åˆ\n    if (typeof str === 'string' && str.includes('data:image')) {\n      // å°è¯•æ‰¾åˆ°æ‰€æœ‰çš„Base64å›¾ç‰‡\n      const matches = str.match(/data:image\\/[^;]+;base64,[A-Za-z0-9+/=]+/g);\n      if (matches && matches.length > 0) {\n        console.log(`æ‰¾åˆ° ${matches.length} ä¸ªå®Œæ•´çš„Base64å›¾ç‰‡`);\n        return matches;\n      }\n    }\n    \n    // æ£€æŸ¥æ˜¯å¦åŒ…å«å¤šä¸ªiVBORå¼€å¤´çš„Base64å›¾ç‰‡\n    if (typeof str === 'string' && str.includes('iVBOR')) {\n      // å°è¯•åˆ†å‰²å¤šä¸ªBase64å­—ç¬¦ä¸²\n      const parts = [];\n      let currentIndex = 0;\n      \n      while (currentIndex < str.length) {\n        const iVBORIndex = str.indexOf('iVBOR', currentIndex);\n        if (iVBORIndex === -1) break;\n        \n        // æ‰¾åˆ°ä¸‹ä¸€ä¸ªiVBORæˆ–å­—ç¬¦ä¸²ç»“æŸ\n        let nextIndex = str.indexOf('iVBOR', iVBORIndex + 5);\n        if (nextIndex === -1) nextIndex = str.length;\n        \n        // æå–è¿™æ®µBase64æ•°æ®\n        const base64Part = str.substring(iVBORIndex, nextIndex).trim();\n        if (base64Part.length > 100) {  // ç¡®ä¿æ˜¯æœ‰æ•ˆçš„Base64æ•°æ®\n          parts.push(base64Part);\n        }\n        \n        currentIndex = nextIndex;\n      }\n      \n      if (parts.length > 0) {\n        console.log(`æ‰¾åˆ° ${parts.length} ä¸ªiVBORå¼€å¤´çš„Base64å›¾ç‰‡`);\n        return parts;\n      }\n    }\n    \n    // å¦‚æœä¸æ˜¯ç‰¹æ®Šçš„Base64é›†åˆï¼Œåˆ™æŒ‰ç…§å¸¸è§„æ–¹å¼å¤„ç†\n    // é¦–å…ˆæ£€æŸ¥æ˜¯å¦æ˜¯å•ä¸ªBase64å­—ç¬¦ä¸²\n    if (typeof str === 'string' && str.length > 100 && \n        (str.startsWith('data:image') || str.startsWith('iVBOR') || \n         /^[A-Za-z0-9+/=]+$/.test(str.substring(0, 20)))) {\n      return [str];\n    }\n    \n    // å°è¯•æŒ‰é€—å·åˆ†å‰²ï¼Œä½†éœ€è¦æ³¨æ„ä¸è¦åˆ†å‰²Base64å­—ç¬¦ä¸²ä¸­çš„é€—å·\n    const items = [];\n    const commaPositions = [];\n    \n    // æ‰¾å‡ºæ‰€æœ‰å¯èƒ½çš„é€—å·ä½ç½®\n    for (let i = 0; i < str.length; i++) {\n      if (str[i] === ',') {\n        commaPositions.push(i);\n      }\n    }\n    \n    // æ£€æŸ¥æ¯ä¸ªé€—å·æ˜¯å¦åœ¨Base64å­—ç¬¦ä¸²å†…éƒ¨\n    let startPos = 0;\n    for (const pos of commaPositions) {\n      // æ£€æŸ¥é€—å·å‰åçš„å­—ç¬¦ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯Base64å†…éƒ¨çš„é€—å·\n      const beforeComma = str.substring(Math.max(0, pos - 20), pos);\n      const afterComma = str.substring(pos + 1, Math.min(str.length, pos + 21));\n      \n      // å¦‚æœé€—å·å‰åéƒ½æ˜¯Base64å­—ç¬¦ï¼Œåˆ™å¯èƒ½æ˜¯Base64å†…éƒ¨çš„é€—å·\n      const isBase64Comma = /^[A-Za-z0-9+/=]+$/.test(beforeComma) && \n                           /^[A-Za-z0-9+/=]+$/.test(afterComma);\n      \n      if (!isBase64Comma) {\n        // è¿™æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„åˆ†éš”é€—å·\n        const item = str.substring(startPos, pos).trim();\n        if (item) items.push(item);\n        startPos = pos + 1;\n      }\n    }\n    \n    // æ·»åŠ æœ€åä¸€é¡¹\n    const lastItem = str.substring(startPos).trim();\n    if (lastItem) items.push(lastItem);\n    \n    // å¦‚æœæ²¡æœ‰æˆåŠŸåˆ†å‰²ï¼Œå›é€€åˆ°ç®€å•çš„é€—å·åˆ†å‰²\n    if (items.length === 0) {\n      return str.split(',').map(item => item.trim());\n    }\n    \n    return items;\n  } catch (error) {\n    console.error('åˆ†å‰²å­—ç¬¦ä¸²å‡ºé”™:', error);\n    // å‡ºé”™æ—¶å°è¯•ç®€å•çš„é€—å·åˆ†å‰²\n    try {\n      return str.split(',').map(item => item.trim());\n    } catch {\n      return [str]; // æœ€åçš„å›é€€æ–¹æ¡ˆ\n    }\n  }\n};\n\n// å¤„ç†å›¾ç‰‡URL\nconst getImageUrl = (imgPath) => {\n  if (!imgPath) {\n    return require('@/assets/img/BUSINESS/img.png');\n  }\n  \n  try {\n    // å¦‚æœæ˜¯Base64ç¼–ç çš„å›¾ç‰‡æ•°æ®\n    if (typeof imgPath === 'string' && imgPath.length > 100) {\n      return sanitizeBase64(imgPath);\n    }\n    \n    // å¦‚æœæ˜¯å®Œæ•´URLï¼Œç›´æ¥è¿”å›\n    if (imgPath.startsWith('http')) {\n      return imgPath;\n    }\n    \n    // å¦‚æœæ˜¯ä»¥/assetså¼€å¤´çš„è·¯å¾„ï¼Œè½¬æ¢ä¸ºæ­£ç¡®çš„è·¯å¾„\n    if (imgPath.startsWith('/assets/')) {\n      // å»æ‰å¼€å¤´çš„/assets/ï¼Œå› ä¸ºåœ¨é¡¹ç›®ä¸­assetsæ˜¯ç›¸å¯¹è·¯å¾„\n      const relativePath = imgPath.replace('/assets/', '');\n      try {\n        return require(`@/assets/${relativePath}`);\n      } catch (e) {\n        // å°è¯•é€šè¿‡APIç½‘å…³è·å–\n        return baseURL + imgPath;\n      }\n    }\n    \n    // å¦‚æœæ˜¯ç›¸å¯¹è·¯å¾„ï¼Œæ·»åŠ baseURL\n    if (imgPath.startsWith('/')) {\n      return baseURL + imgPath;\n    }\n    \n    // å°è¯•åŠ è½½é¡¹ç›®ä¸­çš„å›¾ç‰‡\n    try {\n      // é¦–å…ˆå°è¯•ä»BUSINESSç›®å½•åŠ è½½\n      if (!imgPath.includes('/')) {\n        try {\n          return require('@/assets/img/BUSINESS/' + imgPath);\n        } catch (e) {\n          // å°è¯•ä»å…¶ä»–ç›®å½•åŠ è½½\n        }\n      }\n      \n      // ç„¶åå°è¯•ä»æ™®é€šimgç›®å½•åŠ è½½\n      return require('@/assets/img/' + imgPath);\n    } catch (e) {\n      return require('@/assets/img/BUSINESS/img.png');\n    }\n  } catch (error) {\n    console.error('å¤„ç†å›¾ç‰‡URLå‡ºé”™:', error);\n    return require('@/assets/img/BUSINESS/img.png');\n  }\n};\n\n// å¤„ç†å’ŒéªŒè¯Base64ç¼–ç çš„å›¾ç‰‡\nconst sanitizeBase64 = (base64String) => {\n  try {\n    // å·²ç»æ˜¯å®Œæ•´çš„Base64å­—ç¬¦ä¸²\n    if (base64String.startsWith('data:image/')) {\n      return base64String;\n    }\n    \n    // æ£€æŸ¥æ˜¯å¦æ˜¯PNGçš„Base64ç¼–ç \n    if (base64String.startsWith('iVBOR')) {\n      return `data:image/png;base64,${base64String}`;\n    }\n    \n    // æ£€æŸ¥æ˜¯å¦æ˜¯JPEGçš„Base64ç¼–ç \n    if (base64String.startsWith('/9j/')) {\n      return `data:image/jpeg;base64,${base64String}`;\n    }\n    \n    // æ£€æŸ¥æ˜¯å¦åŒ…å«æ— æ•ˆå­—ç¬¦\n    if (!/^[A-Za-z0-9+/=]+$/.test(base64String.replace(/\\s/g, ''))) {\n      console.warn('Base64å­—ç¬¦ä¸²åŒ…å«æ— æ•ˆå­—ç¬¦');\n      return '';\n    }\n    \n    // æ£€æŸ¥é•¿åº¦æ˜¯å¦åˆç†ï¼ˆBase64ç¼–ç çš„å›¾ç‰‡é€šå¸¸å¾ˆé•¿ï¼‰\n    if (base64String.length < 100) {\n      console.warn('Base64å­—ç¬¦ä¸²é•¿åº¦ä¸è¶³');\n      return '';\n    }\n    \n    // é»˜è®¤ä½œä¸ºPNGå¤„ç†\n    return `data:image/png;base64,${base64String.replace(/\\s/g, '')}`;\n  } catch (error) {\n    console.error('å¤„ç†Base64å­—ç¬¦ä¸²å‡ºé”™:', error);\n    return '';\n  }\n};\n\n// å¤„ç†å›¾ç‰‡åŠ è½½é”™è¯¯\nconst handleImageError = (e, type) => {\n  console.error(`å›¾ç‰‡åŠ è½½å¤±è´¥: ${e.target.src.substring(0, 50)}...`);\n  \n  try {\n    // æ£€æŸ¥æ˜¯å¦æ˜¯Base64ç¼–ç çš„å›¾ç‰‡åŠ è½½å¤±è´¥\n    const src = e.target.src;\n    if (src && src.startsWith('data:image')) {\n      console.log('å°è¯•ä¿®å¤Base64å›¾ç‰‡...');\n      \n      // æå–Base64éƒ¨åˆ†\n      const base64Data = src.split(',')[1];\n      if (base64Data) {\n        // å°è¯•ä½¿ç”¨ä¸åŒçš„MIMEç±»å‹\n        if (src.includes('image/png')) {\n          e.target.src = `data:image/jpeg;base64,${base64Data}`;\n          return;\n        } else if (src.includes('image/jpeg')) {\n          e.target.src = `data:image/png;base64,${base64Data}`;\n          return;\n        }\n      }\n    }\n  } catch (error) {\n    console.error('å¤„ç†å›¾ç‰‡é”™è¯¯æ—¶å‡ºé”™:', error);\n  }\n  \n  // ä½¿ç”¨é»˜è®¤å›¾ç‰‡\n  if (type === 'business') {\n    e.target.src = require('@/assets/img/BUSINESS/img.png');\n  } else {\n    e.target.src = require('@/assets/img/sp01.png');\n  }\n};\n\n// å†æ¬¡ä¸‹å•\nconst reorder = (order) => {\n  // å®ç°å†æ¬¡ä¸‹å•åŠŸèƒ½\n  router.push(`/business-component/${order.businessId}`);\n};\n\n// å‰å¾€è¯„ä»·é¡µé¢\nconst goToRating = (order) => {\n  console.log('Order object:', order);\n  \n  // ç¡®ä¿businessIdå­˜åœ¨ä¸”ä¸ºæœ‰æ•ˆå€¼\n  const businessId = order.businessId || order.business?.businessId || '1';\n  \n  // å¦‚æœå•†å®¶å›¾ç‰‡ä¸ºç©ºï¼Œå°è¯•å†æ¬¡è·å–\n  if (!order.businessImg && businessId) {\n    businessApi.getBusinessById(businessId)\n      .then(businessInfo => {\n        if (businessInfo && businessInfo.businessImg) {\n          navigateToRating(order, businessInfo.businessImg);\n        } else {\n          navigateToRating(order);\n        }\n      })\n      .catch(error => {\n        console.error('è·å–å•†å®¶ä¿¡æ¯å¤±è´¥:', error);\n        navigateToRating(order);\n      });\n  } else {\n    navigateToRating(order);\n  }\n};\n\n// å¯¼èˆªåˆ°è¯„ä»·é¡µé¢\nconst navigateToRating = (order, businessImg = null) => {\n  router.push({\n    name: 'Rating',\n    params: {\n      orderId: order.orderId || '1',\n      businessId: order.businessId || order.business?.businessId || '1',\n      businessName: order.businessName || 'æœªçŸ¥å•†å®¶'\n    },\n    query: {\n      businessImg: businessImg || order.businessImg || '',\n      orderDate: order.orderDate || ''\n    }\n  });\n};\n\n// æ£€æŸ¥è®¢å•æ˜¯å¦å·²è¯„ä»·\nconst isOrderRated = (orderId) => {\n  try {\n    // æ£€æŸ¥æœ¬åœ°å­˜å‚¨ä¸­æ˜¯å¦æœ‰è¯¥è®¢å•çš„è¯„ä»·\n    const ratingsString = localStorage.getItem('localRatings');\n    console.log(`æ£€æŸ¥è®¢å• ${orderId} æ˜¯å¦å·²è¯„ä»·, æœ¬åœ°å­˜å‚¨:`, ratingsString);\n    \n    if (ratingsString) {\n      const ratings = JSON.parse(ratingsString);\n      console.log('è§£æåçš„æœ¬åœ°è¯„ä»·:', ratings);\n      \n      // ç¡®ä¿ä½¿ç”¨æ•°å­—ç±»å‹è¿›è¡Œæ¯”è¾ƒ\n      const isRated = ratings.some(r => r.orderId === Number(orderId));\n      console.log(`è®¢å• ${orderId} å·²è¯„ä»·çŠ¶æ€:`, isRated);\n      return isRated;\n    }\n  } catch (error) {\n    console.error('æ£€æŸ¥è®¢å•è¯„ä»·çŠ¶æ€å¤±è´¥:', error);\n  }\n  return false;\n};\n\nconst fetchOrders = async () => {\n  try {\n    const response = await orderApi.getOrderHistory();\n    console.log('è®¢å•å†å²åŸå§‹å“åº”:', response);\n    \n    if (response && Array.isArray(response)) {\n      orders.value = response;\n    } else if (response && response.data && Array.isArray(response.data)) {\n      orders.value = response.data;\n    } else if (response && typeof response === 'object') {\n      // å°è¯•ä»å“åº”ä¸­æå–æ•°æ®\n      console.log('å°è¯•ä»å“åº”ä¸­æå–è®¢å•æ•°æ®:', response);\n      const possibleOrderArrays = [\n        response.data,\n        response.result,\n        response.content,\n        response.records,\n        response.list,\n        response.orders\n      ];\n      \n      for (const arr of possibleOrderArrays) {\n        if (arr && Array.isArray(arr)) {\n          console.log('æ‰¾åˆ°è®¢å•æ•°ç»„:', arr);\n          orders.value = arr;\n          break;\n        }\n      }\n    }\n    \n    // è¯¦ç»†è®°å½•æ¯ä¸ªè®¢å•çš„å›¾ç‰‡ä¿¡æ¯\n    console.log('è®¢å•æ•°æ®å¤„ç†å‰:', JSON.stringify(orders.value.map(order => ({\n      orderId: order.orderId,\n      businessImg: order.businessImg ? order.businessImg.substring(0, 30) + '...' : 'null',\n      businessImgType: order.businessImg ? typeof order.businessImg : 'null',\n      hasBusinessImg: !!order.businessImg,\n      foodImgs: order.foodImgs ? order.foodImgs.substring(0, 30) + '...' : 'null',\n      foodImgsLength: order.foodImgs ? order.foodImgs.length : 0,\n      foodNames: order.foodNames,\n      foodNamesLength: order.foodNames ? order.foodNames.split(',').length : 0\n    }))));\n    \n    // ç¡®ä¿æ¯ä¸ªè®¢å•å¯¹è±¡éƒ½æœ‰å¿…è¦çš„å±æ€§\n    orders.value = orders.value.map(order => {\n      // ä½¿ç”¨æ•°æ®åº“ä¸­å­˜å‚¨çš„å•†å®¶åç§°å’Œå›¾ç‰‡\n      const businessName = order.businessName || order.business?.businessName || 'æœªçŸ¥å•†å®¶';\n      const businessImg = order.businessImg || order.business?.businessImg || '';\n      \n      // å¤„ç†é£Ÿå“å›¾ç‰‡æ•°æ®\n      let foodImgs = order.foodImgs || '';\n      const foodNames = order.foodNames || '';\n      \n      // æ£€æŸ¥é£Ÿå“åç§°å’Œå›¾ç‰‡æ•°é‡æ˜¯å¦åŒ¹é…\n      const foodNamesArray = foodNames.split(',').filter(name => name.trim());\n      let foodImgsArray = getArrayFromString(foodImgs);\n      \n      console.log(`è®¢å• ${order.orderId} çš„é£Ÿå“åç§°æ•°é‡: ${foodNamesArray.length}, é£Ÿå“å›¾ç‰‡æ•°é‡: ${foodImgsArray.length}`);\n      \n      // å¦‚æœé£Ÿå“å›¾ç‰‡æ•°é‡å°‘äºé£Ÿå“åç§°æ•°é‡ï¼Œæ·»åŠ é»˜è®¤å›¾ç‰‡\n      if (foodImgsArray.length < foodNamesArray.length) {\n        console.log(`è®¢å• ${order.orderId} çš„é£Ÿå“å›¾ç‰‡æ•°é‡ä¸è¶³ï¼Œæ·»åŠ é»˜è®¤å›¾ç‰‡`);\n        const defaultImg = '/assets/img/sp01.png';\n        while (foodImgsArray.length < foodNamesArray.length) {\n          foodImgsArray.push(defaultImg);\n        }\n        // é‡æ–°ç”ŸæˆfoodImgså­—ç¬¦ä¸²\n        foodImgs = foodImgsArray.join(',');\n      }\n      \n      // å¦‚æœæœ‰è®¢å•è¯¦æƒ…ï¼Œå°è¯•ä»ä¸­æå–æ›´å¤šå›¾ç‰‡ä¿¡æ¯\n      if (order.orderDetailList && Array.isArray(order.orderDetailList)) {\n        const detailImages = order.orderDetailList.map(detail => detail.foodImg || '');\n        console.log(`è®¢å• ${order.orderId} çš„è¯¦æƒ…å›¾ç‰‡:`, detailImages);\n        \n        // å¦‚æœè¯¦æƒ…ä¸­çš„å›¾ç‰‡æ¯”foodImgsæ›´å¤šï¼Œä½¿ç”¨è¯¦æƒ…ä¸­çš„å›¾ç‰‡\n        if (detailImages.filter(img => img).length > foodImgsArray.filter(img => img).length) {\n          foodImgs = detailImages.join(',');\n          console.log(`ä½¿ç”¨è®¢å•è¯¦æƒ…ä¸­çš„å›¾ç‰‡:`, foodImgs.substring(0, 50) + '...');\n        }\n      }\n      \n      return {\n        ...order,\n        businessId: order.businessId || order.business?.businessId || '1',\n        businessName: businessName,\n        businessImg: businessImg,\n        foodImgs: foodImgs, // æ›´æ–°åçš„é£Ÿå“å›¾ç‰‡\n        orderDate: order.orderDate || new Date(order.orderTime || Date.now()).toLocaleString()\n      };\n    });\n    \n    console.log('å¤„ç†åçš„è®¢å•æ•°æ®:', orders.value.map(order => ({\n      orderId: order.orderId,\n      foodImgsLength: order.foodImgs ? order.foodImgs.length : 0,\n      foodNamesLength: order.foodNames ? order.foodNames.split(',').length : 0\n    })));\n    \n  } catch (error) {\n    console.error('è·å–è®¢å•å†å²å¤±è´¥:', error);\n    \n    // å¦‚æœAPIè°ƒç”¨å¤±è´¥ï¼Œå°è¯•ä»æœ¬åœ°å­˜å‚¨è·å–è®¢å•ä¿¡æ¯\n    const localOrderInfo = localStorage.getItem('orderInfo');\n    if (localOrderInfo) {\n      try {\n        const orderInfo = JSON.parse(localOrderInfo);\n        console.log('ä½¿ç”¨æœ¬åœ°å­˜å‚¨çš„è®¢å•ä¿¡æ¯:', orderInfo);\n        \n        // åˆ›å»ºæ¨¡æ‹Ÿè®¢å•æ•°æ®\n        const mockOrder = {\n          orderId: new Date().getTime(),\n          businessId: orderInfo.businessId,\n          businessName: orderInfo.businessName,\n          businessImg: orderInfo.businessImg,\n          orderDate: orderInfo.orderDate || new Date().toLocaleString(),\n          orderTotal: orderInfo.orderTotal || 0,\n          orderState: 5, // å·²å®Œæˆ/å¾…è¯„ä»·\n          foodNames: orderInfo.items?.map(item => item.foodName).join(','),\n          foodImgs: orderInfo.items?.map(item => item.foodImg || '/assets/img/sp01.png').join(','),\n          quantities: orderInfo.items?.map(item => item.quantity).join(',')\n        };\n        \n        // ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®\n        orders.value = [mockOrder];\n        \n        // æ˜¾ç¤ºæç¤º\n        ElMessage({\n          message: 'APIæœåŠ¡ä¸å¯ç”¨ï¼Œæ˜¾ç¤ºæœ¬åœ°å­˜å‚¨çš„è®¢å•ä¿¡æ¯',\n          type: 'warning',\n          duration: 3000\n        });\n      } catch (e) {\n        console.error('è§£ææœ¬åœ°è®¢å•ä¿¡æ¯å¤±è´¥:', e);\n        \n        // ä½¿ç”¨ç¡¬ç¼–ç çš„æ¨¡æ‹Ÿæ•°æ®\n        useMockData();\n      }\n    } else {\n      // å¦‚æœæœ¬åœ°å­˜å‚¨ä¸­æ²¡æœ‰è®¢å•ä¿¡æ¯ï¼Œä½¿ç”¨ç¡¬ç¼–ç çš„æ¨¡æ‹Ÿæ•°æ®\n      useMockData();\n    }\n  }\n};\n\n// ä½¿ç”¨ç¡¬ç¼–ç çš„æ¨¡æ‹Ÿæ•°æ®\nconst useMockData = () => {\n  console.log('ä½¿ç”¨ç¡¬ç¼–ç çš„æ¨¡æ‹Ÿè®¢å•æ•°æ®');\n  \n  // åˆ›å»ºæ¨¡æ‹Ÿè®¢å•æ•°æ®\n  const mockOrders = [\n    {\n      orderId: 1,\n      businessId: 1,\n      businessName: 'ä¸‡å®¶é¥ºå­ï¼ˆè½¯ä»¶å›­E18åº—ï¼‰',\n      businessImg: '/assets/img/BUSINESS/img.png',\n      orderDate: new Date().toLocaleString(),\n      orderTotal: 31,\n      orderState: 5,\n      foodNames: 'çº¯è‚‰é²œè‚‰,ç‰ç±³é²œè‚‰',\n      foodImgs: '/assets/img/sp01.png,/assets/img/sp01.png',\n      quantities: '1,1'\n    },\n    {\n      orderId: 2,\n      businessId: 2,\n      businessName: 'è‚¯å¾·åŸºéº¦å½“åŠ³',\n      businessImg: '/assets/img/BUSINESS/img.png',\n      orderDate: new Date(Date.now() - 86400000).toLocaleString(), // æ˜¨å¤©\n      orderTotal: 45,\n      orderState: 5,\n      foodNames: 'æ±‰å ¡,è–¯æ¡,å¯ä¹',\n      foodImgs: '/assets/img/sp01.png,/assets/img/sp01.png,/assets/img/sp01.png',\n      quantities: '1,1,1'\n    }\n  ];\n  \n  // ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®\n  orders.value = mockOrders;\n  \n  // æ˜¾ç¤ºæç¤º\n  ElMessage({\n    message: 'APIæœåŠ¡ä¸å¯ç”¨ï¼Œæ˜¾ç¤ºæ¨¡æ‹Ÿè®¢å•æ•°æ®',\n    type: 'warning',\n    duration: 3000\n  });\n};\n\n// æ ¹æ®é€‰ä¸­çš„æ ‡ç­¾å’Œæœç´¢ç»“æœç­›é€‰è®¢å•\nconst filteredOrders = computed(() => {\n  // å¦‚æœæœ‰æœç´¢ç»“æœï¼Œä¼˜å…ˆæ˜¾ç¤ºæœç´¢ç»“æœ\n  if (searchQuery.value.trim() && searchResults.value.length > 0) {\n    // è¿›ä¸€æ­¥æ ¹æ®æ ‡ç­¾ç­›é€‰æœç´¢ç»“æœ\n    if (activeTab.value === 'all') {\n      return searchResults.value;\n    } else if (activeTab.value === 'inProgress') {\n      // è®¢å•çŠ¶æ€ï¼š1-å·²ä¸‹å•/å¾…ä»˜æ¬¾ï¼Œ2-å·²ä»˜æ¬¾/å¾…æ¥å•ï¼Œ3-å·²æ¥å•/é…é€ä¸­\n      return searchResults.value.filter(order => [1, 2, 3].includes(order.orderState));\n    } else if (activeTab.value === 'toRate') {\n      // æœªè¯„ä»·çš„è®¢å•\n      return searchResults.value.filter(order => \n        order.orderState === 5 && !isOrderRated(order.orderId)\n      );\n    } else if (activeTab.value === 'rated') {\n      // å·²è¯„ä»·çš„è®¢å•\n      return searchResults.value.filter(order => \n        isOrderRated(order.orderId)\n      );\n    }\n    return searchResults.value;\n  }\n  \n  // å¦‚æœæ²¡æœ‰æœç´¢æˆ–æœç´¢ç»“æœä¸ºç©ºï¼Œä½¿ç”¨åŸå§‹ç­›é€‰é€»è¾‘\n  if (activeTab.value === 'all') {\n    return orders.value;\n  } else if (activeTab.value === 'inProgress') {\n    // è®¢å•çŠ¶æ€ï¼š1-å·²ä¸‹å•/å¾…ä»˜æ¬¾ï¼Œ2-å·²ä»˜æ¬¾/å¾…æ¥å•ï¼Œ3-å·²æ¥å•/é…é€ä¸­\n    return orders.value.filter(order => [1, 2, 3].includes(order.orderState));\n  } else if (activeTab.value === 'toRate') {\n    // æœªè¯„ä»·çš„è®¢å•\n    return orders.value.filter(order => \n      order.orderState === 5 && !isOrderRated(order.orderId)\n    );\n  } else if (activeTab.value === 'rated') {\n    // å·²è¯„ä»·çš„è®¢å•\n    return orders.value.filter(order => \n      isOrderRated(order.orderId)\n    );\n  }\n  return orders.value;\n});\n\n// è·å–é£Ÿå“å›¾ç‰‡çš„è¾…åŠ©å‡½æ•°\nconst getFoodImage = (order, index) => {\n  try {\n    // è·å–é£Ÿå“å›¾ç‰‡æ•°ç»„\n    const foodImgs = getArrayFromString(order.foodImgs);\n    console.log(`è·å–è®¢å• ${order.orderId} çš„ç¬¬ ${index} ä¸ªé£Ÿå“å›¾ç‰‡, å›¾ç‰‡æ•°ç»„é•¿åº¦: ${foodImgs.length}`);\n    \n    // æ£€æŸ¥ç´¢å¼•æ˜¯å¦æœ‰æ•ˆ\n    if (index >= 0 && index < foodImgs.length) {\n      const imgPath = foodImgs[index];\n      console.log(`é£Ÿå“å›¾ç‰‡è·¯å¾„: ${imgPath ? (imgPath.length > 50 ? imgPath.substring(0, 50) + '...' : imgPath) : 'null'}`);\n      \n      // æ£€æŸ¥æ˜¯å¦æ˜¯Base64ç¼–ç \n      if (imgPath && imgPath.length > 100) {\n        return sanitizeBase64(imgPath);\n      }\n      \n      // æ£€æŸ¥æ˜¯å¦æ˜¯ç©ºå­—ç¬¦ä¸²æˆ–æ— æ•ˆè·¯å¾„\n      if (!imgPath || imgPath === 'null' || imgPath === 'undefined') {\n        console.log('å›¾ç‰‡è·¯å¾„æ— æ•ˆï¼Œè¿”å›é»˜è®¤å›¾ç‰‡');\n        return require('@/assets/img/sp01.png');\n      }\n      \n      // å¤„ç†æ™®é€šå›¾ç‰‡URL\n      console.log('ä½¿ç”¨getImageUrlå¤„ç†æ™®é€šå›¾ç‰‡URL');\n      return getImageUrl(imgPath);\n    }\n    \n    // å¦‚æœç´¢å¼•æ— æ•ˆï¼Œè¿”å›é»˜è®¤å›¾ç‰‡\n    console.log('ç´¢å¼•æ— æ•ˆï¼Œè¿”å›é»˜è®¤å›¾ç‰‡');\n    return require('@/assets/img/sp01.png');\n  } catch (error) {\n    console.error('è·å–é£Ÿå“å›¾ç‰‡å‡ºé”™:', error, error.stack);\n    return require('@/assets/img/sp01.png');\n  }\n};\n\n// è·å–é£Ÿå“æ•°é‡çš„è¾…åŠ©å‡½æ•°\nconst getFoodQuantity = (order, index) => {\n  try {\n    // è·å–æ•°é‡æ•°ç»„\n    const quantities = getArrayFromString(order.quantities);\n    \n    // æ£€æŸ¥ç´¢å¼•æ˜¯å¦æœ‰æ•ˆ\n    if (index >= 0 && index < quantities.length) {\n      return quantities[index] || '1';\n    }\n    \n    // å¦‚æœç´¢å¼•æ— æ•ˆï¼Œè¿”å›é»˜è®¤å€¼\n    return '1';\n  } catch (error) {\n    console.error('è·å–é£Ÿå“æ•°é‡å‡ºé”™:', error);\n    return '1';\n  }\n};\n</script>\n\n<style scoped>\n.wrapper {\n  width: 100%;\n  height: 100%;\n  background-color: #f5f5f5;\n  padding-bottom: 20px;\n}\n\n.header {\n  background-color: white;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  z-index: 10;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n}\n\n.search-bottom {\n  display: flex;\n  align-items: center;\n  padding: 10px;\n  height: 40px;\n}\n\n.back .icon-back {\n  font-size: 20px;\n  padding: 0 10px;\n}\n\n.search-pt {\n  flex: 1;\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.search-pt input {\n  width: 100%;\n  border: none;\n  background-color: #f5f5f5;\n  padding: 8px 8px 8px 30px;\n  border-radius: 20px;\n  font-size: 14px;\n}\n\n.search-pt .icon-sousuo {\n  position: absolute;\n  left: 10px;\n  font-size: 16px;\n  color: #999;\n}\n\n.box span {\n  padding: 0 10px;\n  font-size: 20px;\n}\n\n.information {\n  display: flex;\n  justify-content: space-around;\n  padding: 10px 0;\n  border-bottom: 1px solid #eee;\n}\n\n.information p {\n  padding: 5px 10px;\n  cursor: pointer;\n  position: relative;\n}\n\n.information p.active {\n  color: #0097ff;\n  font-weight: bold;\n}\n\n.information p.active::after {\n  content: '';\n  position: absolute;\n  bottom: -5px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 20px;\n  height: 3px;\n  background-color: #0097ff;\n  border-radius: 3px;\n}\n\n.body {\n  margin-top: 100px;\n  padding: 10px;\n}\n\n.order-card {\n  background-color: white;\n  border-radius: 10px;\n  margin-bottom: 15px;\n  padding: 15px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n}\n\n.order-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #f0f0f0;\n}\n\n.business-info {\n  display: flex;\n  align-items: center;\n}\n\n.business-img {\n  width: 50px;\n  height: 50px;\n  border-radius: 5px;\n  object-fit: cover;\n  margin-right: 10px;\n}\n\n.business-details {\n  display: flex;\n  flex-direction: column;\n}\n\n.business-name {\n  font-weight: bold;\n  font-size: 16px;\n  margin-bottom: 5px;\n}\n\n.delivery-price {\n  font-size: 12px;\n  color: #ff6b01;\n  background-color: #fff5e6;\n  padding: 2px 5px;\n  border-radius: 3px;\n  display: inline-block;\n}\n\n.order-price {\n  font-size: 16px;\n  font-weight: bold;\n  color: #333;\n}\n\n.order-content {\n  padding: 10px 0;\n}\n\n.food-list {\n  display: flex;\n  flex-direction: column;\n}\n\n.food-item {\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n  background-color: #f9f9f9;\n  border-radius: 8px;\n  padding: 10px;\n}\n\n.food-left {\n  margin-right: 15px;\n}\n\n.food-img {\n  width: 60px;\n  height: 60px;\n  border-radius: 5px;\n  object-fit: cover;\n}\n\n.food-img-placeholder {\n  width: 60px;\n  height: 60px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #f0f0f0;\n  border-radius: 5px;\n}\n\n.food-img-placeholder img {\n  width: 30px;\n  height: 30px;\n}\n\n.food-right {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.food-name {\n  font-size: 14px;\n  font-weight: 500;\n  margin-bottom: 8px;\n}\n\n.food-quantity {\n  font-size: 12px;\n  color: #666;\n  background-color: #f0f0f0;\n  padding: 2px 8px;\n  border-radius: 12px;\n  display: inline-block;\n  width: fit-content;\n}\n\n.order-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 10px;\n  border-top: 1px solid #f0f0f0;\n}\n\n.order-date {\n  font-size: 12px;\n  color: #999;\n}\n\n.order-actions {\n  display: flex;\n  gap: 10px;\n}\n\n.reorder-btn, .rating-btn, .rated-btn {\n  border: none;\n  padding: 8px 15px;\n  border-radius: 20px;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n.reorder-btn {\n  background-color: #0097ff;\n  color: white;\n}\n\n.rating-btn {\n  background-color: #ff6b01;\n  color: white;\n}\n\n.rated-btn {\n  background-color: #4caf50;\n  color: white;\n}\n\n.clear-search {\n  position: absolute;\n  right: 10px;\n  font-size: 18px;\n  color: #999;\n  cursor: pointer;\n  padding: 5px;\n}\n\n.no-results {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 50px 0;\n  color: #999;\n}\n\n.no-results-icon {\n  font-size: 50px;\n  margin-bottom: 10px;\n}\n\n.no-results-text {\n  font-size: 16px;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}